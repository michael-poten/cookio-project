import{I as he,C as ye,R as x}from"./CSJTTG3X.js";import{u as be,R as Ie}from"./CrRb6Oxy.js";import{_ as xe,K as we,M as j,N as Re,J as Pe,O as Ce,r as P,o as Q,k as ze,g as r,x as f,y as l,B as s,z as u,Q as p,R as a,C as o,D as _,P as g,A as w,S as G,T as A,U as De}from"./S_xy22RE.js";const Ve={class:"pa-4"},Se={key:0,class:"mt-2"},Fe={key:1,class:"mt-2"},Te={class:"mt-2"},$e={key:0},Ue={key:0,class:"text-center mt-8 text-high-emphasis",style:{width:"100%"}},Be={class:"overlay-top-left"},Ge={key:0},Ae={key:0,class:"px-1 pb-1",style:{"background-color":"rgba(93,93,93,0.66)"}},Ke={key:1},Me={key:0},Ne={key:1},Ee={key:0,class:"overlay-bottom-right"},Oe={key:0,style:{"background-color":"rgba(93,93,93,0.66)"},class:"px-1"},We={key:1,style:{"background-color":"rgba(93,93,93,0.66)"},class:"px-1 mt-1"},Ze={class:"overlay-bottom-left pa-1"},He={key:1,style:{"background-color":"rgba(93,93,93,0.66)","font-size":"0.8em"},class:"pa-1"},Je={key:0},je={key:0},Qe={class:"mr-0",style:{"font-weight":"600","font-size":"1.6em"}},qe={key:1},Xe={key:0,class:"ma-2"},Ye={style:{"font-size":"1.2em"},class:"text-medium-emphasis"},Le={key:1,class:"ma-2"},en=["onClick"],nn={__name:"RecipeOverview",setup(q){const U=be(),B=we(),{recipes:C}=j(U),{authInfo:h,githubMode:v,lanAddress:X}=j(B);Re(),Pe(),Ce();const b=P({}),K=P(null),M=P(null),N=P(null),S=P(!1),Y=P([{title:"Mahlzeiten",open:!1,items:[{name:"FrÃ¼hstÃ¼ck",selected:!1,icon:"ðŸ³"},{name:"Vorspeise",selected:!1,icon:"ðŸ¥—"},{name:"Hauptmahlzeit",selected:!1,icon:"ðŸ½ï¸"},{name:"Dessert",selected:!1,icon:"ðŸ¨"},{name:"Kuchen",selected:!1,icon:"ðŸ°"},{name:"GebÃ¤ck",selected:!1,icon:"ðŸ¥"},{name:"Snack",selected:!1,icon:"ðŸ¿"},{name:"Grill",selected:!1,icon:"ðŸ”¥"},{name:"Weihnachten",selected:!1,icon:"ðŸŽ„"}]},{title:"Zutaten",open:!1,items:[{name:"Kartoffeln",selected:!1,icon:"ðŸ¥”"},{name:"Reis",selected:!1,icon:"ðŸš"},{name:"Pasta",selected:!1,icon:"ðŸ"},{name:"Risotto",selected:!1,icon:"ðŸš"},{name:"Pilze",selected:!1,icon:"ðŸ„"},{name:"KÃ¼rbis",selected:!1,icon:"ðŸŽƒ"},{name:"Gnocchi",selected:!1,icon:"ðŸ¥”"},{name:"SpÃ¤tzle",selected:!1,icon:"ðŸ"},{name:"Halloumi",selected:!1,icon:"ðŸ§€"},{name:"Tortellini",selected:!1,icon:"ðŸ¥"},{name:"Pesto",selected:!1,icon:"ðŸŒ¿"},{name:"KÃ¤se",selected:!1,icon:"ðŸ§€"}]},{title:"Zubereitungsart",open:!1,items:[{name:"Pizza",selected:!1,icon:"ðŸ•"},{name:"Auflauf",selected:!1,icon:"ðŸ¥˜"},{name:"Eintopf",selected:!1,icon:"ðŸ²"},{name:"Suppe",selected:!1,icon:"ðŸ¥£"},{name:"Salat",selected:!1,icon:"ðŸ¥—"},{name:"Bowl",selected:!1,icon:"ðŸ¥™"},{name:"Curry",selected:!1,icon:"ðŸ›"},{name:"Fast-Food",selected:!1,icon:"ðŸ”"},{name:"Gourmet",selected:!1,icon:"ðŸ‘¨â€ðŸ³"},{name:"Wrap",selected:!1,icon:"ðŸ¥™"},{name:"Sandwich",selected:!1,icon:"ðŸ¥ª"},{name:"Burger",selected:!1,icon:"ðŸ”"},{name:"Thermomix",selected:!1,icon:"âš™ï¸"},{name:"Flammkuchen",selected:!1,icon:"ðŸ•"}]},{title:"Fleischtyp",open:!1,items:[{name:"vegetarisch",selected:!1,icon:"ðŸ¥¦"},{name:"vegan",selected:!1,icon:"ðŸŒ±"},{name:"Tofu",selected:!1,icon:"ðŸ§ˆ"},{name:"Soja",selected:!1,icon:"ðŸ«˜"},{name:"Fisch",selected:!1,icon:"ðŸŸ"},{name:"Fleisch",selected:!1,icon:"ðŸ¥©"},{name:"HÃ¤hnchenfleisch",selected:!1,icon:"ðŸ—"},{name:"Rindfleisch",selected:!1,icon:"ðŸ¥©"},{name:"Schweinefleisch",selected:!1,icon:"ðŸ–"}]},{title:"LÃ¤nderkÃ¼che",open:!1,items:[{name:"italienisch",selected:!1,icon:"ðŸ‡®ðŸ‡¹"},{name:"mediterran",selected:!1,icon:"ðŸŒ¿"},{name:"mexikanisch",selected:!1,icon:"ðŸŒ®"},{name:"amerikanisch",selected:!1,icon:"ðŸŸ"},{name:"franzÃ¶sisch",selected:!1,icon:"ðŸ¥–"},{name:"afrikanisch",selected:!1,icon:"ðŸª˜"},{name:"arabisch",selected:!1,icon:"ðŸ§†"},{name:"deutsch",selected:!1,icon:"ðŸ¥¨"},{name:"griechisch",selected:!1,icon:"ðŸ¥™"},{name:"asiatisch",selected:!1,icon:"ðŸœ"},{name:"japanisch",selected:!1,icon:"ðŸ£"},{name:"koreanisch",selected:!1,icon:"ðŸ±"},{name:"spanisch",selected:!1,icon:"ðŸ¥˜"},{name:"russisch",selected:!1,icon:"ðŸ¥Ÿ"},{name:"thailÃ¤ndisch",selected:!1,icon:"ðŸ²"},{name:"tÃ¼rkisch",selected:!1,icon:"ðŸ¢"},{name:"vietnamesisch",selected:!1,icon:"ðŸœ"},{name:"indisch",selected:!1,icon:"ðŸ›"}]},{title:"Jahreszeiten",open:!1,items:[{name:"Winter",selected:!1,icon:"â„ï¸"},{name:"FrÃ¼hling",selected:!1,icon:"ðŸŒ¸"},{name:"Sommer",selected:!1,icon:"ðŸŒž"},{name:"Herbst",selected:!1,icon:"ðŸ‚"}]}]),c=P({duration:[0,120],rating:1,cookedDays:[0,10],tags:[]});Q(async()=>{await B.getAuthInfo(),R(!0)});function L(t){return v.value?"https://mmhhhh.de/data/home/recipes/"+t.id+"/image.jpg?t="+(b.value[t.id]?b.value[t.id]:0):X.value+"api/"+h.value.userId+"/recipes/"+t.id+"/image?t="+(b.value[t.id]?b.value[t.id]:0)}const E=ze(()=>{if(!C.value)return[];let t=JSON.parse(JSON.stringify(C.value));return t=t.sort((n,i)=>{const m=n.planned?n.planned:!1,I=i.planned?i.planned:!1;if(m-I!==0)return m-I;const T=n.uploaded?n.uploaded:!1,y=i.uploaded?i.uploaded:!1;if(y-T!==0)return y-T;const z=n.rating,k=i.rating,V=typeof z=="number"&&z!==null,$=typeof k=="number"&&k!==null;return!V&&!$?0:V?$?k-z:1:-1}).reverse(),t=t.filter(n=>{if(!n.duration&&c.value.duration[0]>0||n.duration<c.value.duration[0]||n.duration>c.value.duration[1])return!1;if(c.value.cookedDays){const i=[c.value.cookedDays[0]*7,c.value.cookedDays[1]===10?c.value.cookedDays[1]*5e3:c.value.cookedDays[1]*7];if(!n.cookedDays&&i[0]>0||n.cookedDays<i[0]||n.cookedDays>i[1])return!1}if(v.value&&!n.uploaded)return!1;if(c.value.rating>0){const i=c.value.rating-1;if((n.rating||0)<i)return!1}return!(c.value.tags.length>0&&(!n.tags||!c.value.tags.every(i=>n.tags.includes(i))))}),t});function O(t){v.value?window.open("https://mmhhhh.de/recipes/go?id="+t.id,"_blank","noopener"):window.open("/recipes/go?id="+t.id,"_blank","noopener")}async function ee(t){if(t.planned){const n={voting:0,planned:!1,cooked:!1,ordered:!1};await x.updateRecipe(h.value.userId,t.id,n),x.uploadRecipeToGithub(h.value.userId,null)}else{const n={voting:t.voting?t.voting+1:1};await x.updateRecipe(h.value.userId,t.id,n)}await R()}async function ne(t){const n={voting:0,planned:!0};await x.updateRecipe(h.value.userId,t.id,n),await R(),W(null)}async function W(t){await x.uploadRecipeToGithub(h.value.userId,t?t.id:null),t&&(t.uploaded=!0,await R())}async function te(t){const n={voting:0};await x.updateRecipe(h.value.userId,t.id,n),await R()}function se(t){const n=c.value.tags.indexOf(t);n===-1?c.value.tags.push(t):c.value.tags.splice(n,1)}async function R(t=!1){console.log("authInfo userId",h.value.userId),C.value=await U.getAllRecipes(h.value.userId),!v.value&&t&&F()}function Z(t){K.value(t).then(async n=>{n&&(t?setTimeout(()=>{const i=[t.id];F(i)},200):F())})}async function F(t){if(!v.value&&(await R(),C.value)){const n=C.value.filter(m=>!m.ingredientsInProgress&&!m.sectionsInProgress&&!m.imageInProgress).map(m=>m.id);t&&t.forEach(m=>{n.includes(m)&&(b.value[m]?b.value[m]++:b.value[m]=1)});const i=C.value.filter(m=>m.ingredientsInProgress||m.sectionsInProgress||m.imageInProgress).map(m=>m.id);i.length>0&&(await new Promise(m=>setTimeout(m,2e3)),await F(i))}}async function H(t){N.value(t).then(async n=>{n&&(await x.deleteRecipe(h.value.userId,t),await R(),x.uploadRecipeToGithub(h.value.userId,null))})}function le(t){M.value(t)}return(t,n)=>{const i=r("v-btn"),m=r("v-app-bar-title"),I=r("v-divider"),T=r("v-app-bar"),y=r("v-list-item"),z=r("v-range-slider"),k=r("v-icon"),V=r("v-rating"),$=r("v-expansion-panel-title"),oe=r("v-chip"),ae=r("v-chip-group"),ie=r("v-expansion-panel-text"),de=r("v-expansion-panel"),ue=r("v-expansion-panels"),re=r("v-navigation-drawer"),J=r("v-progress-circular"),D=r("v-list-item-title"),ce=r("v-list"),me=r("v-menu"),fe=r("v-toolbar"),ve=r("v-img"),ge=r("v-card"),pe=r("v-col"),_e=r("v-row"),ke=r("v-fab");return l(),f("div",null,[s(T,{color:g(v)?null:"rgb(89, 135, 184)"},{default:o(()=>[s(m,null,{default:o(()=>[s(i,{to:"/recipes","prepend-icon":"mdi-chef-hat",variant:"plain"},{default:o(()=>[...n[9]||(n[9]=[_("Cookio",-1)])]),_:1})]),_:1}),s(i,{"prepend-icon":"mdi-filter-outline",onClick:n[0]||(n[0]=e=>S.value=!S.value)},{default:o(()=>[...n[10]||(n[10]=[_(" Filter ",-1)])]),_:1}),s(I,{vertical:"",class:"mx-2"}),g(v)?a("",!0):(l(),p(i,{key:0,"prepend-icon":"mdi-calendar-month",to:"/planner"},{default:o(()=>[...n[11]||(n[11]=[_(" Mahlzeiten-Planer ",-1)])]),_:1}))]),_:1},8,["color"]),s(re,{modelValue:S.value,"onUpdate:modelValue":n[4]||(n[4]=e=>S.value=e),location:"right",width:"250"},{prepend:o(()=>[s(y,{lines:"two","prepend-icon":"mdi-text-box-search-outline",title:"Filter"})]),default:o(()=>[s(I),u("div",Ve,[u("div",null,[n[12]||(n[12]=u("h4",null,[_("Dauer "),u("span",{style:{"font-size":"0.8em"}},"(Min.)")],-1)),s(z,{modelValue:c.value.duration,"onUpdate:modelValue":n[1]||(n[1]=e=>c.value.duration=e),elevation:"3",max:"120",step:"10","thumb-label":"always",class:"mt-8 px-2","hide-details":""},null,8,["modelValue"])]),g(v)?a("",!0):(l(),f("div",Se,[n[13]||(n[13]=u("h4",null,"Zuletzt gekocht (Wochen)",-1)),s(z,{modelValue:c.value.cookedDays,"onUpdate:modelValue":n[2]||(n[2]=e=>c.value.cookedDays=e),elevation:"3",max:"10",step:"1","thumb-label":"always",class:"mt-8 px-2","hide-details":""},null,8,["modelValue"])])),s(I,{class:"mt-3"}),g(v)?a("",!0):(l(),f("div",Fe,[n[14]||(n[14]=u("h4",null,"Bewertung",-1)),s(V,{modelValue:c.value.rating,"onUpdate:modelValue":n[3]||(n[3]=e=>c.value.rating=e),hover:"",length:"6",size:"40","active-color":"primary",class:"py-3"},{item:o(e=>[s(k,{color:e.isFilled?e.index===0?"#92aac5":"#1e3f66":"grey-lighten-1",size:"large"},{default:o(()=>[_(w(e.isFilled&&e.index===0?"mdi-star-off":"mdi-star"),1)]),_:2},1032,["color"])]),_:1},8,["modelValue"])])),s(I),u("div",Te,[(l(!0),f(G,null,A(Y.value,e=>(l(),f("div",{key:e.title},[s(ue,{multiple:""},{default:o(()=>[s(de,{elevation:"0",modelValue:e.open,"onUpdate:modelValue":d=>e.open=d,class:"pa-0 ma-0"},{default:o(()=>[s($,{class:"pa-0",static:""},{default:o(()=>[u("div",null,[u("h4",null,[_(w(e.title)+" ",1),e.items.some(d=>c.value.tags.includes(d.name))?(l(),f("span",$e,"("+w(e.items.filter(d=>c.value.tags.includes(d.name)).length)+")",1)):a("",!0)])])]),_:2},1024),s(ie,{class:"no-padding-content"},{default:o(()=>[s(ae,{"selected-class":"selected-chip",column:"",multiple:""},{default:o(()=>[(l(!0),f(G,null,A(e.items,d=>(l(),p(oe,{key:d.name,text:d.icon+" "+d.name,value:d.name,variant:c.value.tags.includes(d.name)?"elevated":"tonal",onClick:sn=>se(d.name)},null,8,["text","value","variant","onClick"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]))),128))])])]),_:1},8,["modelValue"]),s(_e,{class:"text-center"},{default:o(()=>[g(E).length===0?(l(),f("div",Ue,[u("div",null,[s(k,{icon:"mdi-chef-hat",size:"50"})]),n[15]||(n[15]=u("div",{style:{"font-size":"1.8em"}},"Keine Rezepte gefunden!",-1))])):a("",!0),(l(!0),f(G,null,A(g(E),e=>(l(),p(pe,{cols:"12",md:"4",sm:"6",lg:"3",xl:"2",key:e.id},{default:o(()=>[s(ge,{class:"mx-auto","max-width":"374",color:e.uploaded?null:"#ADCEE9",border:!e.uploaded},{default:o(()=>[(l(),p(ve,{class:"position-relative",height:"200",src:L(e),key:b.value[e.id]?b.value[e.id]:0,color:"grey",cover:""},{default:o(()=>[u("div",Be,[!g(v)&&(e.rating||!e.uploaded)?(l(),f("div",Ge,[e.rating?(l(),f("div",Ae,[s(V,{modelValue:e.rating,"onUpdate:modelValue":d=>e.rating=d,hover:"",length:"5",size:"20",readonly:"",class:"mb-1"},null,8,["modelValue","onUpdate:modelValue"])])):a("",!0)])):a("",!0),e.ingredientsInProgress||e.sectionsInProgress||e.imageInProgress?(l(),f("div",Ke,[e.sectionsInProgress||e.ingredientsInProgress?(l(),f("span",Me,[u("span",null,[s(J,{indeterminate:"",color:"white"})]),n[16]||(n[16]=_()),n[17]||(n[17]=u("span",null,"Wird noch analysiert...",-1))])):a("",!0),e.imageInProgress?(l(),f("span",Ne,[u("span",null,[s(J,{indeterminate:"",color:"white"})]),n[18]||(n[18]=_()),n[19]||(n[19]=u("span",null,"Bild wird generiert...",-1))])):a("",!0)])):a("",!0)]),e.duration||e.lastCookedDays>=0&&!g(v).value?(l(),f("div",Ee,[e.lastCookedDays>=0&&!g(v).value?(l(),f("div",Oe,[s(k,{icon:"mdi-bowl-mix-outline",class:"mr-1"}),u("b",null,w(e.lastCookedDays)+" Tag(e)",1)])):a("",!0),e.duration?(l(),f("div",We,[s(k,{icon:"mdi-clock-outline",class:"mr-1"}),u("b",null,w(e.duration)+" Min.",1)])):a("",!0)])):a("",!0),u("div",Ze,[!g(v)&&!e.uploaded&&!e.ingredientsInProgress&&!e.sectionsInProgress&&!e.imageInProgress?(l(),p(i,{key:0,class:"mb-1",onClick:d=>W(e),style:{"background-color":"rgba(93,93,93,0.66)"}},{default:o(()=>[s(k,{icon:"mdi-upload-off",size:"30"})]),_:1},8,["onClick"])):a("",!0),!e.duration&&!e.tags&&!(e.sectionsInProgress||e.ingredientsInProgress||e.imageInProgress)?(l(),f("div",He,[s(k,{icon:"mdi-information-slab-circle"}),n[20]||(n[20]=_()),n[21]||(n[21]=u("b",null,"Nur Zutatenliste vorhanden!",-1))])):a("",!0)]),s(fe,{color:"transparent"},{append:o(()=>[!g(v)&&!e.imageInProgress&&!e.sectionsInProgress&&!e.ingredientsInProgress?(l(),p(i,{key:0,onClick:d=>ee(e),style:{"background-color":"rgba(93,93,93,0.66)"}},{default:o(()=>[u("div",null,[e.planned?a("",!0):(l(),f("div",Je,[e.voting&&e.voting>0?(l(),f("span",je,[u("span",Qe,w(e.voting),1),n[22]||(n[22]=u("span",{class:"mr-1",style:{"font-weight":"600","font-size":"1.1em"}},"x",-1))])):a("",!0),s(k,{icon:e.voting&&e.voting>0?"mdi-thumb-up":"mdi-thumb-up-outline",size:"30"},null,8,["icon"])])),e.planned?(l(),f("div",qe,[s(k,{icon:"mdi-bowl-mix",size:"30",color:"blue"})])):a("",!0)])]),_:2},1032,["onClick"])):a("",!0),!g(v)&&(e.sectionsInProgress||e.ingredientsInProgress||e.imageInProgress)?(l(),p(i,{key:1,icon:"mdi-stop-circle-outline",color:"white",onClick:d=>H(e.id),variant:"plain"},null,8,["onClick"])):a("",!0),s(me,null,{activator:o(({props:d})=>[!e.imageInProgress&&!e.sectionsInProgress&&!e.ingredientsInProgress?(l(),p(i,De({key:0,icon:"mdi-dots-vertical",color:"white"},{ref_for:!0},d),{default:o(()=>[s(k,{icon:"mdi-dots-vertical",size:"35"})]),_:1},16)):a("",!0)]),default:o(()=>[!e.imageInProgress&&!e.sectionsInProgress?(l(),p(ce,{key:0},{default:o(()=>[e.duration||e.tags?(l(),p(y,{key:0,onClick:d=>O(e)},{default:o(()=>[s(D,null,{default:o(()=>[...n[23]||(n[23]=[_("Zubereiten",-1)])]),_:1})]),_:1},8,["onClick"])):a("",!0),!g(v)&&!e.imageInProgress&&!e.sectionsInProgress&&!e.ingredientsInProgress&&!e.planned?(l(),p(y,{key:1,onClick:d=>ne(e)},{default:o(()=>[s(D,null,{default:o(()=>[...n[24]||(n[24]=[_("Einplanen",-1)])]),_:1})]),_:1},8,["onClick"])):a("",!0),s(y,{onClick:d=>le(e.id)},{default:o(()=>[s(D,null,{default:o(()=>[...n[25]||(n[25]=[_("Zutaten einkaufen",-1)])]),_:1})]),_:1},8,["onClick"]),!g(v)&&e.voting&&e.voting>0?(l(),p(y,{key:2,onClick:d=>te(e)},{default:o(()=>[s(D,null,{default:o(()=>[...n[26]||(n[26]=[_("Likes lÃ¶schen",-1)])]),_:1})]),_:1},8,["onClick"])):a("",!0),s(I),g(v)?a("",!0):(l(),p(y,{key:3,onClick:d=>Z(e)},{default:o(()=>[s(D,null,{default:o(()=>[...n[27]||(n[27]=[_("Daten importieren",-1)])]),_:1})]),_:1},8,["onClick"])),g(v)?a("",!0):(l(),p(y,{key:4,onClick:d=>H(e.id)},{default:o(()=>[s(D,null,{default:o(()=>[...n[28]||(n[28]=[_("LÃ¶schen",-1)])]),_:1})]),_:1},8,["onClick"]))]),_:2},1024)):a("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["src"])),!e.sectionsInProgress&&!e.sectionsUploaded?(l(),f("div",Xe,[u("span",Ye,w(e.title),1)])):a("",!0),(e.duration||e.tags)&&!e.ingredientsInProgress&&!e.sectionsInProgress?(l(),f("div",Le,[u("a",{target:"_blank",style:{"text-decoration-line":"none",color:"#000000","font-size":"1.2em",cursor:"pointer"},class:"text-medium-emphasis",onClick:d=>O(e)},w(e.title),9,en)])):a("",!0)]),_:2},1032,["color","border"])]),_:2},1024))),128))]),_:1}),n[29]||(n[29]=u("div",{style:{height:"70px"}},null,-1)),g(v)?a("",!0):(l(),p(ke,{color:"rgb(89, 135, 184)",key:"test","prepend-icon":"mdi-cookie-plus-outline",app:!0,location:"right bottom",text:"Rezept hinzufÃ¼gen",extended:"",size:"large",onClick:n[5]||(n[5]=e=>Z(null))})),s(Ie,{onResult:n[6]||(n[6]=e=>K.value=e)}),s(he,{onResult:n[7]||(n[7]=e=>M.value=e)}),s(ye,{onResult:n[8]||(n[8]=e=>N.value=e),title:"Bitte bestÃ¤tigen",message:"Soll das Rezept wirklich gelÃ¶scht werden?"})])}}},tn=xe(nn,[["__scopeId","data-v-76062fa1"]]),dn={__name:"index",setup(q){return Q(async()=>{}),(U,B)=>(l(),p(tn))}};export{dn as default};
