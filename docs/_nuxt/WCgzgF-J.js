import{C as Se,R as U,I as Fe}from"./Cjgv88Vv.js";import{_ as Ee,M as Ge,K as Me,N as de,O as Be,J as Ae,P as Ke,r as D,o as ue,W as Ne,X as Oe,g,x as v,y as s,B as a,Q as h,R as u,z as r,C as d,D as _,U as w,A as R,S as A,T as K,Y as He,Z as Le,V as We}from"./BRCm4WWK.js";import{I as Ze}from"./BQouVP9Q.js";import{R as je}from"./C6C4o4x2.js";import{G as Je}from"./CI608YEO.js";import"./B6bACNNe.js";const Ye={class:"pa-4"},Qe={style:{width:"100%"}},Xe={class:"text-center"},qe={key:0},en={class:"mt-2"},nn={key:2,class:"mt-2"},tn={key:3,class:"mt-2"},sn={key:5,class:"mt-2"},ln={key:0},an={key:0},on=["href"],dn={key:1},un=["href"],rn={style:{"background-color":"rgb(166, 190, 226)","font-size":"0.7em"},class:"pl-1"},cn={key:0,class:"text-center mt-8 text-high-emphasis",style:{width:"100%"}},mn={key:0,class:"mt-2 mb-1",style:{"font-size":"1.2em"}},fn={class:"overlay-top-left"},vn={key:0},gn={key:0,class:"px-1 pb-1",style:{"background-color":"rgba(93,93,93,0.66)"}},hn={key:1},pn={key:0},yn={key:1},kn={key:2},_n={key:0,class:"overlay-bottom-right"},wn={key:0,style:{"background-color":"rgba(93,93,93,0.66)"},class:"px-1"},In={key:1,style:{"background-color":"rgba(93,93,93,0.66)"},class:"px-1 mt-1"},bn={class:"overlay-bottom-left pa-1"},Pn={key:1,style:{"background-color":"rgba(93,93,93,0.66)","font-size":"0.8em"},class:"pa-1"},xn={key:0},Cn={key:0},Rn={class:"mr-0",style:{"font-weight":"600","font-size":"1.6em"}},Tn={key:1},zn={key:1,class:"ma-2"},Dn={style:{"font-size":"1.2em"},class:"text-medium-emphasis"},Vn={key:2,class:"ma-2"},$n={style:{"font-size":"1.2em"},class:"text-medium-emphasis"},Un={key:3,class:"ma-2"},Sn=["onClick"],Fn={key:4,class:"ma-2"},En={__name:"RecipeOverview",setup(re){const L=Ge(),W=Me(),{recipes:V}=de(L),{authInfo:P,githubMode:p,lanAddress:ce,showFilter:Z}=de(W);Be(),Ae(),Ke();const T=D({}),X=D(null),q=D(null),ee=D(null),C=D(!1),N=D([]),M=D([]),me=D([{title:"Mahlzeiten",open:!1,items:[{name:"FrÃ¼hstÃ¼ck",selected:!1,icon:"ðŸ³"},{name:"Vorspeise",selected:!1,icon:"ðŸ¥—"},{name:"Hauptmahlzeit",selected:!1,icon:"ðŸ½ï¸"},{name:"Dessert",selected:!1,icon:"ðŸ¨"},{name:"Kuchen",selected:!1,icon:"ðŸ°"},{name:"GebÃ¤ck",selected:!1,icon:"ðŸ¥"},{name:"Snack",selected:!1,icon:"ðŸ¿"},{name:"Grill",selected:!1,icon:"ðŸ”¥"},{name:"Weihnachten",selected:!1,icon:"ðŸŽ„"}]},{title:"Zutaten",open:!1,items:[{name:"Kartoffeln",selected:!1,icon:"ðŸ¥”"},{name:"Reis",selected:!1,icon:"ðŸš"},{name:"Pasta",selected:!1,icon:"ðŸ"},{name:"Risotto",selected:!1,icon:"ðŸš"},{name:"Pilze",selected:!1,icon:"ðŸ„"},{name:"KÃ¼rbis",selected:!1,icon:"ðŸŽƒ"},{name:"Gnocchi",selected:!1,icon:"ðŸ¥”"},{name:"SpÃ¤tzle",selected:!1,icon:"ðŸ"},{name:"Halloumi",selected:!1,icon:"ðŸ§€"},{name:"Tortellini",selected:!1,icon:"ðŸ¥"},{name:"Pesto",selected:!1,icon:"ðŸŒ¿"},{name:"KÃ¤se",selected:!1,icon:"ðŸ§€"}]},{title:"Zubereitungsart",open:!1,items:[{name:"Pizza",selected:!1,icon:"ðŸ•"},{name:"Auflauf",selected:!1,icon:"ðŸ¥˜"},{name:"Eintopf",selected:!1,icon:"ðŸ²"},{name:"Suppe",selected:!1,icon:"ðŸ¥£"},{name:"Salat",selected:!1,icon:"ðŸ¥—"},{name:"Bowl",selected:!1,icon:"ðŸ¥™"},{name:"Curry",selected:!1,icon:"ðŸ›"},{name:"Fast-Food",selected:!1,icon:"ðŸ”"},{name:"Gourmet",selected:!1,icon:"ðŸ‘¨â€ðŸ³"},{name:"Wrap",selected:!1,icon:"ðŸ¥™"},{name:"Sandwich",selected:!1,icon:"ðŸ¥ª"},{name:"Burger",selected:!1,icon:"ðŸ”"},{name:"Thermomix",selected:!1,icon:"âš™ï¸"},{name:"Flammkuchen",selected:!1,icon:"ðŸ•"}]},{title:"Fleischtyp",open:!1,items:[{name:"vegetarisch",selected:!1,icon:"ðŸ¥¦"},{name:"vegan",selected:!1,icon:"ðŸŒ±"},{name:"Tofu",selected:!1,icon:"ðŸ§ˆ"},{name:"Soja",selected:!1,icon:"ðŸ«˜"},{name:"Fisch",selected:!1,icon:"ðŸŸ"},{name:"Fleisch",selected:!1,icon:"ðŸ¥©"},{name:"HÃ¤hnchenfleisch",selected:!1,icon:"ðŸ—"},{name:"Rindfleisch",selected:!1,icon:"ðŸ¥©"},{name:"Schweinefleisch",selected:!1,icon:"ðŸ–"}]},{title:"LÃ¤nderkÃ¼che",open:!1,items:[{name:"italienisch",selected:!1,icon:"ðŸ‡®ðŸ‡¹"},{name:"mediterran",selected:!1,icon:"ðŸŒ¿"},{name:"mexikanisch",selected:!1,icon:"ðŸŒ®"},{name:"amerikanisch",selected:!1,icon:"ðŸŸ"},{name:"franzÃ¶sisch",selected:!1,icon:"ðŸ¥–"},{name:"afrikanisch",selected:!1,icon:"ðŸª˜"},{name:"arabisch",selected:!1,icon:"ðŸ§†"},{name:"deutsch",selected:!1,icon:"ðŸ¥¨"},{name:"griechisch",selected:!1,icon:"ðŸ¥™"},{name:"asiatisch",selected:!1,icon:"ðŸœ"},{name:"japanisch",selected:!1,icon:"ðŸ£"},{name:"koreanisch",selected:!1,icon:"ðŸ±"},{name:"spanisch",selected:!1,icon:"ðŸ¥˜"},{name:"russisch",selected:!1,icon:"ðŸ¥Ÿ"},{name:"thailÃ¤ndisch",selected:!1,icon:"ðŸ²"},{name:"tÃ¼rkisch",selected:!1,icon:"ðŸ¢"},{name:"vietnamesisch",selected:!1,icon:"ðŸœ"},{name:"indisch",selected:!1,icon:"ðŸ›"}]},{title:"Jahreszeiten",open:!1,items:[{name:"Winter",selected:!1,icon:"â„ï¸"},{name:"FrÃ¼hling",selected:!1,icon:"ðŸŒ¸"},{name:"Sommer",selected:!1,icon:"ðŸŒž"},{name:"Herbst",selected:!1,icon:"ðŸ‚"}]}]),o=D({duration:[0,120],rating:1,cookedDays:[0,10],tags:[],showPlanned:!0,showTags:!1,showUnrated:!0}),fe=D(["Fleisch","Fisch","Reis","GefÃ¼llte Nudeln","Pasta","Gnocchi","Getreideprodukte","Tofu","Kartoffeln","Teigware"]),b=D(null);ue(async()=>{await $(!0),o.value.showPlanned=p.value,await j(),window.addEventListener("focus",j)}),Ne(()=>{window.removeEventListener("focus",j)}),Oe(o,t=>{setTimeout(()=>{o.value.searchText===t.searchText&&O()},400)},{deep:!0});async function j(){console.log("refreshTodayRecipe");let t=await W.getAuthInfo();const e=new Date,l=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),c=String(e.getDate()).padStart(2,"0");let y=t.calendarPlan,m=[];if(y[`${l}-${i}-${c}`]){if(y[`${l}-${i}-${c}`].type==="RECIPE"&&!y[`${l}-${i}-${c}`].recipeId){let f=P.value.calendarPlan;f||(f={});const S=[],E=new Date;for(const I of Object.keys(f))if(f[I]&&f[I].recipeId){const G=V.value.find(B=>B.id===f[I].recipeId);G.planned&&!G.cooked&&new Date(I).getTime()>=E.getTime()&&(S.push(f[I].recipeId),console.log("recipeTitle",f[I].recipeTitle))}m=V.value.filter(I=>I.planned&&!I.cooked&&I.ordered&&!S.includes(I.id))}if(m.length===1)b.value={recipeTitle:m[0].title,recipeId:m[0].id,recipes:[]};else{let f=y[`${l}-${i}-${c}`].recipeTitle;!f&&(!m||m.length===0)&&(y[`${l}-${i}-${c}`].type==="OTHER"?f="Sonstige Mahlzeit":y[`${l}-${i}-${c}`].type==="SCHEDULED"&&(f="AuswÃ¤rts / Lieferung")),b.value={recipeTitle:f,recipeId:y[`${l}-${i}-${c}`].recipeId,recipes:m}}}}function J(t,e){return e?"/images/analyzing.png":p.value?"https://mmhhhh.de/data/home/recipes/"+t+"/image.jpg?t="+(T.value[t]?T.value[t]:0):ce.value+"api/"+P.value.userId+"/recipes/"+t+"/image?t="+(T.value[t]?T.value[t]:0)}function O(){if(!V.value)return M.value=[],[];let t=[];return C.value?t=N.value:t=V.value,t=t.filter(e=>{if(!o.value.showPlanned&&e.planned&&!e.imageInProgress&&!e.sectionsInProgress&&!e.ingredientsInProgress||e.originalId||e.isNew||o.value.searchText&&e.title.toLowerCase().indexOf(o.value.searchText.toLowerCase())===-1&&e.titleLong.toLowerCase().indexOf(o.value.searchText.toLowerCase())===-1||!e.duration&&o.value.duration[0]>0||e.duration<o.value.duration[0]||e.duration>o.value.duration[1])return!1;if(o.value.cookedDays){const l=[o.value.cookedDays[0]*7,o.value.cookedDays[1]===10?5e4:o.value.cookedDays[1]*7];if((e.lastCookedDays===void 0||e.lastCookedDays===null)&&l[1]<5e4||e.lastCookedDays!==void 0&&e.lastCookedDays!==null&&(e.lastCookedDays<l[0]||e.lastCookedDays>l[1]))return!1}if(p.value&&!e.uploaded)return!1;if(o.value.rating>0||!o.value.showUnrated){if(!o.value.showUnrated&&!e.rating)return!1;const l=o.value.rating-1,i=e.rating;if(i&&i<l)return!1}return!(o.value.tags.length>0&&(!e.tags||!o.value.tags.every(l=>e.tags.includes(l))))}),C.value?(M.value=t,t):(t=t.sort((e,l)=>{const i=!!e.ingredientsInProgress||!!e.sectionsInProgress||!!e.imageInProgress,c=!!l.ingredientsInProgress||!!l.sectionsInProgress||!!l.imageInProgress;if(i-c!==0)return i-c;const y=e.planned!==null&&e.planned!==void 0?e.planned:!1,m=l.planned!==null&&l.planned!==void 0?l.planned:!1;if(y-m!==0)return y-m;const f=e.uploaded?e.uploaded:!1,S=l.uploaded?l.uploaded:!1;if(S-f!==0)return S-f;const E=e.rating,I=l.rating,G=typeof E=="number"&&E!==null,B=typeof I=="number"&&I!==null;return!G&&!B?0:G?B?I-E:1:-1}).reverse(),M.value=t,t)}function ve(){C.value?(o.value.showPlanned=!1,o.value.showUnrated=!0,o.value.cookedDays=[0,10],o.value.showTags=!1,o.value.tags=[],C.value=!1):(o.value.showPlanned=!1,o.value.showTags=!1,o.value.showUnrated=!0,o.value.cookedDays=[0,10],o.value.tags=[],C.value=!0,ne())}function ne(){let t=[];V.value.forEach(c=>t.push(c));for(let c=t.length-1;c>0;c--){const y=Math.floor(Math.random()*(c+1));[t[c],t[y]]=[t[y],t[c]]}N.value=t;const e=[],l=[];z([],["Fleisch"],e,l,2),z([],["Fisch"],e,l,2),z(["Fleisch","Tofu"],["Pasta"],e,l,3),z(["Fleisch","Tofu"],["GefÃ¼llte Nudeln"],e,l,2),z(["Fleisch","Tofu"],["Reis"],e,l,2),z(["Fleisch","Tofu"],["Gnocchi"],e,l,1),z(["Fleisch","Tofu"],["Getreideprodukte"],e,l,1),z(["Fleisch","Tofu"],["Kartoffeln"],e,l,1),z(["Fleisch","Tofu"],["Teigware"],e,l,1),z(["Fleisch"],["Tofu"],e,l,1),z(["Fleisch","Pasta"],["Tofu"],e,l,1);let i=[];l.forEach(c=>i.push(c));for(let c=i.length-1;c>0;c--){const y=Math.floor(Math.random()*(c+1));[i[c],i[y]]=[i[y],i[c]]}N.value=i.slice(0,8),O()}async function te(t){if(await navigator.clipboard.writeText("https://mmhhhh.de/recipes/go?id="+t.id),navigator.share)try{await navigator.share({title:t.title,text:t.title,url:"https://mmhhhh.de/recipes/go?id="+t.id})}catch(e){console.error("Teilen abgebrochen",e)}}function z(t,e,l,i,c){let y=N.value.filter(m=>!l.includes(m.id)).filter(m=>!m.planned).filter(m=>!m.voting||m.voting===0).filter(m=>{const f=[21,5e4];return!((m.lastCookedDays===void 0||m.lastCookedDays===null)&&f[1]<5e4||m.lastCookedDays!==void 0&&m.lastCookedDays!==null&&(m.lastCookedDays<f[0]||m.lastCookedDays>f[1]))}).filter(m=>t?t.every(f=>!(m.tags?m.tags:[]).includes(f)):!0).filter(m=>e?e.every(f=>(m.tags?m.tags:[]).includes(f)):!0).slice(0,c);y.forEach(m=>l.push(m.id)),y.forEach(m=>i.push(m))}async function ge(t,e){t.tags&&t.tags.includes(e)?t.tags=t.tags.filter(i=>i!==e):(t.tags||(t.tags=[]),t.tags.push(e));const l={tags:t.tags};await U.updateRecipe(P.value.userId,t.id,l),$()}function he(t){p.value?window.open("https://mmhhhh.de/recipes/go?id="+t.id,"_blank","noopener"):window.open("/recipes/go?id="+t.id,"_blank","noopener")}async function pe(t){if(t.planned){const e={voting:0,planned:!1,cooked:!1,ordered:!1};await U.updateRecipe(P.value.userId,t.id,e),U.uploadRecipeToGithub(P.value.userId,null),t.voting=0,t.planned=!1,t.uploaded=!1,t.ordered=!1}else{const e={voting:t.voting?t.voting+1:1};await U.updateRecipe(P.value.userId,t.id,e),t.voting=t.voting?t.voting+1:1}await $()}async function ye(t){t.planned=!0,t.voting=0,await U.planRecipe(P.value.userId,t.id),await $()}async function ke(t){await U.uploadRecipeToGithub(P.value.userId,t?t.id:null),t&&(t.uploaded=!0,await $())}async function _e(t){t.voting=0;const e={voting:0};await U.updateRecipe(P.value.userId,t.id,e),await $()}function we(t){const e=o.value.tags.indexOf(t);e===-1?o.value.tags.push(t):o.value.tags.splice(e,1)}async function $(t=!1){console.log("authInfo userId",P.value.userId),V.value=await L.getAllRecipes(P.value.userId),!p.value&&t&&H(),setTimeout(()=>{O()},400)}function se(t){X.value(t).then(async e=>{e&&(t?setTimeout(()=>{const l=[t.id];H(l)},200):H())})}async function H(t){if(!p.value&&(await $(),V.value)){const e=V.value.filter(i=>!i.ingredientsInProgress&&!i.sectionsInProgress&&!i.imageInProgress).map(i=>i.id);t&&t.forEach(i=>{e.includes(i)&&(T.value[i]?T.value[i]++:T.value[i]=1)});const l=V.value.filter(i=>i.ingredientsInProgress||i.sectionsInProgress||i.imageInProgress).map(i=>i.id);l.length>0&&(await new Promise(i=>setTimeout(i,2e3)),await H(l))}}async function le(t){ee.value(t).then(async e=>{e&&(await U.deleteRecipe(P.value.userId,t),await $(),U.uploadRecipeToGithub(P.value.userId,null))})}function Ie(t){q.value(t)}async function be(t){await Fe.analyzeWithNewEngine(P.value.userId,t),await $()}return(t,e)=>{const l=g("v-list-item"),i=g("v-divider"),c=g("v-btn"),y=g("v-checkbox"),m=g("v-range-slider"),f=g("v-icon"),S=g("v-rating"),E=g("v-expansion-panel-title"),I=g("v-chip"),G=g("v-chip-group"),B=g("v-expansion-panel-text"),Pe=g("v-expansion-panel"),xe=g("v-expansion-panels"),Ce=g("v-navigation-drawer"),Y=g("v-img"),ae=g("v-card"),oe=g("v-col"),ie=g("v-row"),Re=g("v-alert"),Te=g("v-text-field"),Q=g("v-progress-circular"),F=g("v-list-item-title"),ze=g("v-list"),De=g("v-menu"),Ve=g("v-toolbar"),$e=g("v-speed-dial"),Ue=g("v-fab");return s(),v("div",null,[a(Ce,{modelValue:w(Z),"onUpdate:modelValue":e[6]||(e[6]=n=>He(Z)?Z.value=n:null),location:"right",width:"250"},{prepend:d(()=>[a(l,{class:"mt-2","prepend-icon":"mdi-text-box-search-outline",title:"Filter"})]),default:d(()=>[a(i),r("div",Ye,[r("div",Qe,[a(c,{style:{width:"100%"},"min-height":"60",variant:"elevated",onClick:ve,stacked:"",elevation:"0",border:"",active:C.value,"active-color":"rgb(89, 135, 184)","prepend-icon":"mdi-heart-search"},{default:d(()=>[...e[13]||(e[13]=[_("Auswahlmodus",-1)])]),_:1},8,["active"]),r("div",Xe,[C.value?(s(),h(c,{key:0,onClick:ne,variant:"plain",class:"mt-1"},{default:d(()=>[...e[14]||(e[14]=[_("Nochmal mischen",-1)])]),_:1})):u("",!0)])]),a(i,{class:"mt-3"}),C.value?u("",!0):(s(),v("div",qe,[a(y,{modelValue:o.value.showPlanned,"onUpdate:modelValue":e[0]||(e[0]=n=>o.value.showPlanned=n),"hide-details":"auto",density:"comfortable",label:"Geplante anzeigen"},null,8,["modelValue"]),a(y,{modelValue:o.value.showTags,"onUpdate:modelValue":e[1]||(e[1]=n=>o.value.showTags=n),"hide-details":"auto",density:"comfortable",label:"Basis-Tags bearbeiten"},null,8,["modelValue"])])),C.value?u("",!0):(s(),h(i,{key:1,class:"mt-3"})),r("div",en,[e[15]||(e[15]=r("h4",null,[_("Dauer "),r("span",{style:{"font-size":"0.8em"}},"(Min.)")],-1)),a(m,{modelValue:o.value.duration,"onUpdate:modelValue":e[2]||(e[2]=n=>o.value.duration=n),elevation:"3",max:"120",step:"10","thumb-label":"always",class:"mt-8 px-2","hide-details":""},null,8,["modelValue"])]),!w(p)&&!C.value?(s(),v("div",nn,[e[16]||(e[16]=r("h4",null,"Zuletzt gekocht (Wochen)",-1)),a(m,{modelValue:o.value.cookedDays,"onUpdate:modelValue":e[3]||(e[3]=n=>o.value.cookedDays=n),elevation:"3",max:"10",step:"1","thumb-label":"always",class:"mt-8 px-2","hide-details":""},null,8,["modelValue"])])):u("",!0),a(i,{class:"mt-3"}),w(p)?u("",!0):(s(),v("div",tn,[e[17]||(e[17]=r("h4",null,"Bewertung",-1)),a(S,{modelValue:o.value.rating,"onUpdate:modelValue":e[4]||(e[4]=n=>o.value.rating=n),hover:"",length:"6",size:"40","active-color":"primary",class:"py-3"},{item:d(n=>[a(f,{color:n.isFilled?n.index===0?"#92aac5":"#1e3f66":"grey-lighten-1",size:"large"},{default:d(()=>[_(R(n.isFilled&&n.index===0?"mdi-star-off":"mdi-star"),1)]),_:2},1032,["color"])]),_:1},8,["modelValue"]),a(y,{modelValue:o.value.showUnrated,"onUpdate:modelValue":e[5]||(e[5]=n=>o.value.showUnrated=n),"hide-details":"auto",density:"comfortable",label:"Unbewertete anzeigen"},null,8,["modelValue"])])),C.value?u("",!0):(s(),h(i,{key:4})),C.value?u("",!0):(s(),v("div",sn,[(s(!0),v(A,null,K(me.value,n=>(s(),v("div",{key:n.title},[a(xe,{multiple:""},{default:d(()=>[a(Pe,{elevation:"0",modelValue:n.open,"onUpdate:modelValue":x=>n.open=x,class:"pa-0 ma-0"},{default:d(()=>[a(E,{class:"pa-0",static:""},{default:d(()=>[r("div",null,[r("h4",null,[_(R(n.title)+" ",1),n.items.some(x=>o.value.tags.includes(x.name))?(s(),v("span",ln,"("+R(n.items.filter(x=>o.value.tags.includes(x.name)).length)+")",1)):u("",!0)])])]),_:2},1024),a(B,{class:"no-padding-content"},{default:d(()=>[a(G,{"selected-class":"selected-chip",column:"",multiple:""},{default:d(()=>[(s(!0),v(A,null,K(n.items,x=>(s(),h(I,{key:x.name,text:x.icon+" "+x.name,value:x.name,variant:o.value.tags.includes(x.name)?"elevated":"tonal",onClick:k=>we(x.name)},null,8,["text","value","variant","onClick"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]))),128))]))])]),_:1},8,["modelValue"]),b.value&&(b.value.recipes&&b.value.recipes.length>0||b.value.recipeTitle)?(s(),h(Re,{key:0,closable:"",style:{background:"linear-gradient(90deg, rgba(89, 135, 184, 1) 0%, rgba(191, 207, 219, 1) 100%)"},class:"mb-6"},{default:d(()=>[!b.value.recipes||b.value.recipes.length===0?(s(),v("div",an,[r("a",{target:"_blank",href:b.value.recipeId?"/recipes/go?id="+b.value.recipeId:"#",style:{"text-decoration-line":"none",color:"white"}},[b.value.recipeId?(s(),h(Y,{key:0,class:"position-relative","max-height":"100",src:J(b.value.recipeId),color:"grey",cover:""},null,8,["src"])):u("",!0),e[18]||(e[18]=r("div",{class:"mt-2"},"Heutige Mahlzeit:",-1)),e[19]||(e[19]=_()),r("h2",null,[r("i",null,R(b.value.recipeTitle),1)])],8,on)])):u("",!0),b.value.recipes&&b.value.recipes.length>0?(s(),v("div",dn,[e[20]||(e[20]=r("h2",{class:"mt-2",style:{color:"white"}},[r("i",null,"Heutige Auswahl an Mahlzeiten:")],-1)),a(ie,{align:"center"},{default:d(()=>[(s(!0),v(A,null,K(b.value.recipes,n=>(s(),h(oe,{key:n.id,cols:"6"},{default:d(()=>[r("a",{target:"_blank",href:n&&n.sectionsUploaded?"/recipes/go?id="+n.id:"#",style:{"text-decoration-line":"none",color:"white"}},[a(ae,null,{default:d(()=>[(s(),h(Y,{class:"position-relative",height:"150",src:J(n.id),key:T.value[n.id]?T.value[n.id]:0,cover:""},null,8,["src"])),r("div",rn,R(n.title||"Ohne Titel"),1)]),_:2},1024)],8,un)]),_:2},1024))),128))]),_:1})])):u("",!0)]),_:1})):u("",!0),r("div",null,[a(Te,{modelValue:o.value.searchText,"onUpdate:modelValue":e[7]||(e[7]=n=>o.value.searchText=n),label:"Suche",variant:"solo-filled",onKeyup:e[8]||(e[8]=n=>w(Je).debounceTime("searchTextUpdated",O,300)),clearable:""},null,8,["modelValue"])]),a(ie,{class:"text-center"},{default:d(()=>[M.value.length===0?(s(),v("div",cn,[r("div",null,[a(f,{icon:"mdi-chef-hat",size:"50"})]),e[21]||(e[21]=r("div",{style:{"font-size":"1.8em"}},"Keine Rezepte gefunden!",-1))])):u("",!0),(s(!0),v(A,null,K(M.value,(n,x)=>(s(),h(oe,{cols:"12",md:"4",sm:"6",lg:"3",xl:"2",key:n.id},{default:d(()=>[a(ae,{class:"mx-auto","max-width":"374",color:n.uploaded?null:"#ADCEE9",border:!n.uploaded},{default:d(()=>[C.value?(s(),v("div",mn,[r("b",null,"Vorschlag "+R(x+1+" / "+M.value.length),1)])):u("",!0),r("div",null,[(s(),h(Y,{class:Le([{"scan-img":n.ingredientsInProgress||n.sectionsInProgress||n.imageInProgress},"position-relative"]),height:"200",src:J(n.id,n.ingredientsInProgress||n.sectionsInProgress||n.imageInProgress),key:T.value[n.id]?T.value[n.id]:0,color:"grey",cover:""},{default:d(()=>[r("div",fn,[!w(p)&&(n.rating||!n.uploaded)?(s(),v("div",vn,[n.rating?(s(),v("div",gn,[a(S,{modelValue:n.rating,"onUpdate:modelValue":k=>n.rating=k,hover:"",length:"5",size:"20",readonly:"",class:"mb-1"},null,8,["modelValue","onUpdate:modelValue"])])):u("",!0)])):u("",!0),n.ingredientsInProgress||n.sectionsInProgress||n.imageInProgress?(s(),v("div",hn,[n.ingredientsInProgress?(s(),v("span",pn,[r("span",null,[a(Q,{indeterminate:"",color:"white"})]),e[22]||(e[22]=_()),e[23]||(e[23]=r("span",null,"Zutaten werden analysiert...",-1))])):u("",!0),n.sectionsInProgress?(s(),v("span",yn,[r("span",null,[a(Q,{indeterminate:"",color:"white"})]),e[24]||(e[24]=_()),e[25]||(e[25]=r("span",null,"Schritte werden analysiert...",-1))])):u("",!0),n.imageInProgress?(s(),v("span",kn,[r("span",null,[a(Q,{indeterminate:"",color:"white"})]),e[26]||(e[26]=_()),e[27]||(e[27]=r("span",null,"Bild wird generiert...",-1))])):u("",!0)])):u("",!0)]),n.duration||n.lastCookedDays>=0&&!w(p).value?(s(),v("div",_n,[n.lastCookedDays>=0&&!w(p).value?(s(),v("div",wn,[a(f,{icon:"mdi-bowl-mix-outline",class:"mr-1"}),r("b",null,"Vor "+R(n.lastCookedDays)+" Tagen",1)])):u("",!0),n.duration?(s(),v("div",In,[a(f,{icon:"mdi-clock-outline",class:"mr-1"}),r("b",null,R(n.duration)+" Min.",1)])):u("",!0)])):u("",!0),r("div",bn,[!w(p)&&!n.uploaded&&!n.ingredientsInProgress&&!n.sectionsInProgress&&!n.imageInProgress?(s(),h(c,{key:0,class:"mb-1",onClick:k=>ke(n),style:{"background-color":"rgba(93,93,93,0.66)"}},{default:d(()=>[a(f,{icon:"mdi-upload-off",size:"30"})]),_:1},8,["onClick"])):u("",!0),!n.ingredientsInProgress&&!n.sectionsInProgress&&!n.imageInProgress&&!n.sectionsUploaded?(s(),v("div",Pn,[a(f,{icon:"mdi-information-slab-circle"}),e[28]||(e[28]=_()),e[29]||(e[29]=r("b",null,"Nur Zutatenliste vorhanden!",-1))])):u("",!0)]),a(Ve,{color:"transparent"},{append:d(()=>[w(p)&&!n.planned&&!n.imageInProgress&&!n.sectionsInProgress&&!n.ingredientsInProgress?(s(),h(c,{key:0,onClick:k=>te(n),style:{"background-color":"rgba(93,93,93,0.66)"},class:"mr-1"},{default:d(()=>[r("div",null,[a(f,{icon:"mdi-share-variant-outline",size:"30"})])]),_:1},8,["onClick"])):u("",!0),(w(p)&&n.planned||!w(p))&&!n.imageInProgress&&!n.sectionsInProgress&&!n.ingredientsInProgress?(s(),h(c,{key:1,onClick:k=>pe(n),style:{"background-color":"rgba(93,93,93,0.66)"}},{default:d(()=>[r("div",null,[n.planned?u("",!0):(s(),v("div",xn,[n.voting&&n.voting>0?(s(),v("span",Cn,[r("span",Rn,R(n.voting),1),e[30]||(e[30]=r("span",{class:"mr-1",style:{"font-weight":"600","font-size":"1.1em"}},"x",-1))])):u("",!0),a(f,{icon:n.voting&&n.voting>0?"mdi-thumb-up":"mdi-thumb-up-outline",size:"30"},null,8,["icon"])])),n.planned?(s(),v("div",Tn,[a(f,{icon:"mdi-bowl-mix",size:"30",color:"blue"})])):u("",!0)])]),_:2},1032,["onClick"])):u("",!0),!w(p)&&(n.sectionsInProgress||n.ingredientsInProgress||n.imageInProgress)?(s(),h(c,{key:2,icon:"mdi-stop-circle-outline",color:"white",onClick:k=>le(n.id),variant:"plain"},null,8,["onClick"])):u("",!0),a(De,null,{activator:d(({props:k})=>[!n.imageInProgress&&!n.sectionsInProgress&&!n.ingredientsInProgress?(s(),h(c,We({key:0,icon:"mdi-dots-vertical",color:"white"},{ref_for:!0},k),{default:d(()=>[a(f,{icon:"mdi-dots-vertical",size:"35"})]),_:1},16)):u("",!0)]),default:d(()=>[!n.imageInProgress&&!n.sectionsInProgress?(s(),h(ze,{key:0},{default:d(()=>[!w(p)&&!n.imageInProgress&&!n.sectionsInProgress&&!n.ingredientsInProgress&&!n.planned?(s(),h(l,{key:0,onClick:k=>ye(n),"prepend-icon":"mdi-plus-thick"},{default:d(()=>[a(F,null,{default:d(()=>[...e[31]||(e[31]=[_("Einplanen",-1)])]),_:1})]),_:1},8,["onClick"])):u("",!0),!w(p)&&n.voting&&n.voting>0?(s(),h(l,{key:1,onClick:k=>_e(n),"prepend-icon":"mdi-thumbs-up-down"},{default:d(()=>[a(F,null,{default:d(()=>[...e[32]||(e[32]=[_("Likes lÃ¶schen",-1)])]),_:1})]),_:1},8,["onClick"])):u("",!0),n.sectionsUploaded?u("",!0):(s(),h(l,{key:2,onClick:k=>Ie(n.id),"prepend-icon":"mdi-cart"},{default:d(()=>[a(F,null,{default:d(()=>[...e[33]||(e[33]=[_("Zutaten einkaufen",-1)])]),_:1})]),_:1},8,["onClick"])),a(i),!n.imageInProgress&&!n.sectionsInProgress?(s(),h(l,{key:3,to:"/recipes/edit?id="+n.id,"prepend-icon":"mdi-pencil"},{default:d(()=>[a(F,null,{default:d(()=>[...e[34]||(e[34]=[_("Bearbeiten",-1)])]),_:1})]),_:1},8,["to"])):u("",!0),!w(p)&&!n.sectionsUploaded?(s(),h(l,{key:4,onClick:k=>se(n),"prepend-icon":"mdi-image-plus"},{default:d(()=>[a(F,null,{default:d(()=>[...e[35]||(e[35]=[_("Rezeptschritte hinzufÃ¼gen",-1)])]),_:1})]),_:1},8,["onClick"])):u("",!0),!w(p)&&n.engine!=="gpt-5"?(s(),h(l,{key:5,onClick:k=>be(n.id),"prepend-icon":"mdi-auto-fix"},{default:d(()=>[a(F,null,{default:d(()=>[...e[36]||(e[36]=[_("Analyse verbessern",-1)])]),_:1})]),_:1},8,["onClick"])):u("",!0),w(p)?u("",!0):(s(),h(l,{key:6,onClick:k=>te(n),"prepend-icon":"mdi-share"},{default:d(()=>[a(F,null,{default:d(()=>[...e[37]||(e[37]=[_("Link teilen...",-1)])]),_:1})]),_:1},8,["onClick"])),w(p)?u("",!0):(s(),h(l,{key:7,onClick:k=>le(n.id),"prepend-icon":"mdi-delete"},{default:d(()=>[a(F,null,{default:d(()=>[...e[38]||(e[38]=[_("LÃ¶schen",-1)])]),_:1})]),_:1},8,["onClick"]))]),_:2},1024)):u("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class","src"]))]),n.title&&(n.ingredientsInProgress||n.sectionsInProgress)?(s(),v("div",zn,[r("span",Dn,R(n.title),1)])):u("",!0),n.title&&!n.ingredientsInProgress&&!n.sectionsInProgress&&!n.sectionsUploaded?(s(),v("div",Vn,[r("span",$n,R(n.title),1)])):u("",!0),!n.ingredientsInProgress&&!n.sectionsInProgress&&n.sectionsUploaded?(s(),v("div",Un,[r("a",{target:"_blank",style:{"text-decoration-line":"none",color:"#000000","font-size":"1.2em",cursor:"pointer"},class:"text-medium-emphasis",onClick:k=>he(n)},R(n.title),9,Sn)])):u("",!0),(o.value.showTags||!n.uploaded||!n.tags||n.tags.length===0)&&!n.ingredientsInProgress&&!n.sectionsInProgress&&!n.imageInProgress?(s(),v("div",Fn,[(s(!0),v(A,null,K(fe.value,k=>(s(),v("span",{key:k},[a(I,{class:"ml-1 mt-1",color:n.tags&&n.tags.includes(k)?"#183240":"#9f9f9f",onClick:Mn=>ge(n,k)},{default:d(()=>[_(R(k),1)]),_:2},1032,["color","onClick"])]))),128))])):u("",!0)]),_:2},1032,["color","border"])]),_:2},1024))),128))]),_:1}),e[42]||(e[42]=r("div",{style:{height:"70px"}},null,-1)),w(p)?u("",!0):(s(),h(Ue,{color:"rgb(89, 135, 184)",key:"test","prepend-icon":"mdi-cookie-plus-outline",app:!0,location:"right bottom",extended:"",size:"large"},{default:d(()=>[e[41]||(e[41]=r("span",null,"Rezept hinzufÃ¼gen",-1)),a($e,{location:"top center",activator:"parent"},{default:d(()=>[a(c,{key:"1",onClick:e[9]||(e[9]=n=>se(null)),variant:"outlined",color:"black",style:{"background-color":"white","font-size":"1.0em"},"prepend-icon":"mdi-image-plus"},{default:d(()=>[...e[39]||(e[39]=[_(" Per Bildanalyse ",-1)])]),_:1}),a(c,{key:"2",to:"/recipes/edit?id=new",variant:"outlined",style:{"background-color":"white","font-size":"1.0em"},"prepend-icon":"mdi-plus"},{default:d(()=>[...e[40]||(e[40]=[_(" Manuell erstellen ",-1)])]),_:1})]),_:1})]),_:1})),a(je,{onResult:e[10]||(e[10]=n=>X.value=n)}),a(Ze,{onResult:e[11]||(e[11]=n=>q.value=n)}),a(Se,{onResult:e[12]||(e[12]=n=>ee.value=n),title:"Bitte bestÃ¤tigen",message:"Soll das Rezept wirklich gelÃ¶scht werden?"})])}}},Gn=Ee(En,[["__scopeId","data-v-e65c5315"]]),Ln={__name:"index",setup(re){return ue(async()=>{}),(L,W)=>(s(),h(Gn))}};export{Ln as default};
