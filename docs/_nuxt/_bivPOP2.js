import{I as ae,R as P}from"./DwokY33Z.js";import{u as le}from"./CJGfTXah.js";import{L as M,M as oe,J as ie,N as ce,K as T,r as b,o as G,k as B,g as r,x as f,y as i,B as o,z as n,C as a,D as m,O as g,P as d,Q as _,R as D,S as N,A as I,T as re}from"./7vDRmOQw.js";import{_ as de}from"./DlAUqK2U.js";const ue={class:"text-center"},fe={class:"text-center"},me={key:0,class:"text-center mt-8 text-high-emphasis",style:{width:"100%"}},_e={class:"mx-auto"},ge={style:{"background-color":"rgba(93,93,93,0.66)"}},ve={key:0,class:"px-1 pb-1"},pe={key:1,class:"pa-1 text-white",style:{"font-size":"0.8em"}},he={class:"text-white"},ye={key:0,class:"px-1"},ke={class:"ma-2"},be=["href"],xe={style:{width:"100%"}},we={style:{width:"100%"},class:"text-center"},Ie={key:0,class:"text-center mt-8 text-high-emphasis",style:{width:"100%"}},Re={class:"overlay-bottom-right"},Pe={key:0,style:{"background-color":"rgba(93,93,93,0.66)"},class:"px-1"},ze={key:1,style:{"background-color":"rgba(93,93,93,0.66)"},class:"px-1"},Se=["href"],Ce={key:0,class:"overlay-top-left pa-1",style:{"font-size":"0.8em","background-color":"rgba(93,93,93,0.66)"}},Ve={class:"ma-2"},Ae={__name:"MealPlanner",setup(Z){const z=le(),{recipes:u}=M(z);oe(),ie(),ce();const S=T(),{authInfo:p,githubMode:E,lanAddress:H}=M(S),x=b({});b(null);const C=b(null);b(!1),b([{title:"Mahlzeiten",open:!1,items:[{name:"Frühstück",selected:!1,icon:"🍳"},{name:"Vorspeise",selected:!1,icon:"🥗"},{name:"Hauptmahlzeit",selected:!1,icon:"🍽️"},{name:"Dessert",selected:!1,icon:"🍨"},{name:"Kuchen",selected:!1,icon:"🍰"},{name:"Gebäck",selected:!1,icon:"🥐"},{name:"Snack",selected:!1,icon:"🍿"},{name:"Grill",selected:!1,icon:"🔥"},{name:"Weihnachten",selected:!1,icon:"🎄"}]},{title:"Zutaten",open:!1,items:[{name:"Kartoffeln",selected:!1,icon:"🥔"},{name:"Reis",selected:!1,icon:"🍚"},{name:"Pasta",selected:!1,icon:"🍝"},{name:"Risotto",selected:!1,icon:"🍚"},{name:"Pilze",selected:!1,icon:"🍄"},{name:"Kürbis",selected:!1,icon:"🎃"},{name:"Gnocchi",selected:!1,icon:"🥔"},{name:"Spätzle",selected:!1,icon:"🍝"},{name:"Halloumi",selected:!1,icon:"🧀"},{name:"Tortellini",selected:!1,icon:"🍥"},{name:"Pesto",selected:!1,icon:"🌿"},{name:"Käse",selected:!1,icon:"🧀"}]},{title:"Zubereitungsart",open:!1,items:[{name:"Pizza",selected:!1,icon:"🍕"},{name:"Auflauf",selected:!1,icon:"🥘"},{name:"Eintopf",selected:!1,icon:"🍲"},{name:"Suppe",selected:!1,icon:"🥣"},{name:"Salat",selected:!1,icon:"🥗"},{name:"Bowl",selected:!1,icon:"🥙"},{name:"Curry",selected:!1,icon:"🍛"},{name:"Fast-Food",selected:!1,icon:"🍔"},{name:"Gourmet",selected:!1,icon:"👨‍🍳"},{name:"Wrap",selected:!1,icon:"🥙"},{name:"Sandwich",selected:!1,icon:"🥪"},{name:"Burger",selected:!1,icon:"🍔"},{name:"Thermomix",selected:!1,icon:"⚙️"},{name:"Flammkuchen",selected:!1,icon:"🍕"}]},{title:"Fleischtyp",open:!1,items:[{name:"vegetarisch",selected:!1,icon:"🥦"},{name:"vegan",selected:!1,icon:"🌱"},{name:"Tofu",selected:!1,icon:"🧈"},{name:"Soja",selected:!1,icon:"🫘"},{name:"Fisch",selected:!1,icon:"🐟"},{name:"Fleisch",selected:!1,icon:"🥩"},{name:"Hähnchenfleisch",selected:!1,icon:"🍗"},{name:"Rindfleisch",selected:!1,icon:"🥩"},{name:"Schweinefleisch",selected:!1,icon:"🍖"}]},{title:"Länderküche",open:!1,items:[{name:"italienisch",selected:!1,icon:"🇮🇹"},{name:"mediterran",selected:!1,icon:"🌿"},{name:"mexikanisch",selected:!1,icon:"🌮"},{name:"amerikanisch",selected:!1,icon:"🍟"},{name:"französisch",selected:!1,icon:"🥖"},{name:"afrikanisch",selected:!1,icon:"🪘"},{name:"arabisch",selected:!1,icon:"🧆"},{name:"deutsch",selected:!1,icon:"🥨"},{name:"griechisch",selected:!1,icon:"🥙"},{name:"asiatisch",selected:!1,icon:"🍜"},{name:"japanisch",selected:!1,icon:"🍣"},{name:"koreanisch",selected:!1,icon:"🍱"},{name:"spanisch",selected:!1,icon:"🥘"},{name:"russisch",selected:!1,icon:"🥟"},{name:"thailändisch",selected:!1,icon:"🍲"},{name:"türkisch",selected:!1,icon:"🍢"},{name:"vietnamesisch",selected:!1,icon:"🍜"},{name:"indisch",selected:!1,icon:"🍛"}]},{title:"Jahreszeiten",open:!1,items:[{name:"Winter",selected:!1,icon:"❄️"},{name:"Frühling",selected:!1,icon:"🌸"},{name:"Sommer",selected:!1,icon:"🌞"},{name:"Herbst",selected:!1,icon:"🍂"}]}]),b({duration:[0,120],rating:1,tags:[]}),G(async()=>{await S.getAuthInfo(),await y(),A()});const h=B(()=>(console.log("recipes",u.value),u.value?(u.value=u.value.sort((l,e)=>{const c=l.rating,s=e.rating,R=typeof c=="number"&&c!==null,v=typeof s=="number"&&s!==null;return!R&&!v?0:R?v?s-c:-1:1}),u.value.filter(l=>!!l.voting)):[])),w=B(()=>u.value.filter(l=>!!l.planned));function V(l){return E.value?"https://mmhhhh.de/data/home/recipes/"+l.id+"/image.jpg":H.value+"api/"+p.value.userId+"/recipes/"+l.id+"/image"}async function L(l){const e={planned:!0,voting:0};await P.updateRecipe(p.value.userId,l,e),await y()}async function $(){let l=h.value;for(const e of l){const c={voting:0};await P.updateRecipe(p.value.userId,e.id,c)}await y()}async function j(){let l=w.value;for(const e of l){const c={planned:!1};await P.updateRecipe(p.value.userId,e.id,c)}await y()}async function U(l){const e={planned:!1,voting:0};await P.updateRecipe(p.value.userId,l,e),await y()}async function y(){console.log("authInfo.value.userId",p.value.userId),u.value=await z.getAllRecipes(p.value.userId)}async function A(l){if(await y(),u.value){const e=u.value.filter(s=>!s.ingredientsInProgress&&!s.sectionsInProgress&&!s.imageInProgress).map(s=>s.id);l&&l.forEach(s=>{e.includes(s)&&(x.value[s]?x.value[s]++:x.value[s]=1)});const c=u.value.filter(s=>s.ingredientsInProgress||s.sectionsInProgress||s.imageInProgress).map(s=>s.id);c.length>0&&(await new Promise(s=>setTimeout(s,2e3)),await A(c))}}function W(l){C.value(l)}return(l,e)=>{const c=r("v-btn"),s=r("v-app-bar-title"),R=r("v-app-bar"),v=r("v-icon"),J=r("v-rating"),O=r("v-carousel-item"),Q=r("v-carousel"),F=r("v-list-item-title"),K=r("v-list-item"),q=r("v-list"),X=r("v-menu"),Y=r("v-toolbar"),ee=r("v-img"),te=r("v-card"),ne=r("v-col"),se=r("v-row");return i(),f("div",null,[o(R,null,{default:a(()=>[o(s,null,{default:a(()=>[o(c,{to:"/recipes","prepend-icon":"mdi-chef-hat",variant:"plain"},{default:a(()=>e[1]||(e[1]=[m("Cookio")])),_:1,__:[1]})]),_:1}),o(c,{"prepend-icon":"mdi-filter-outline",to:"/recipes"},{default:a(()=>e[2]||(e[2]=[m(" Rezeptübersicht ")])),_:1,__:[2]})]),_:1}),n("div",ue,[e[9]||(e[9]=n("h2",{class:"mt-6 text-center"},"~ Vorschläge ~",-1)),_(h)&&_(h).length>0?(i(),g(c,{key:0,variant:"plain",class:"text-center",onClick:$},{default:a(()=>e[3]||(e[3]=[m("Alle Likes entfernen")])),_:1,__:[3]})):d("",!0),n("div",fe,[_(h).length===0?(i(),f("div",me,[n("div",null,[o(v,{icon:"mdi-chef-hat",size:"50"})]),e[4]||(e[4]=n("div",{style:{"font-size":"1.2em"}},"Keine ausgewählten Rezepte gefunden!",-1))])):d("",!0),_(h).length>0?(i(),g(Q,{key:1,"hide-delimiter-background":"","hide-delimiters":_(h).length===1},{default:a(()=>[(i(!0),f(D,null,N(_(h),t=>(i(),g(O,{cover:"",src:V(t),key:t.id},{default:a(()=>[n("div",_e,[n("div",ge,[t.rating?(i(),f("div",ve,[o(J,{modelValue:t.rating,"onUpdate:modelValue":k=>t.rating=k,hover:"",length:"5",size:"20",readonly:"",color:"white"},null,8,["modelValue","onUpdate:modelValue"])])):d("",!0),!t.duration&&!t.tags&&!(t.sectionsInProgress||t.ingredientsInProgress||t.imageInProgress)?(i(),f("div",pe,[n("span",null,[o(v,{icon:"mdi-information-slab-circle"}),e[5]||(e[5]=m()),e[6]||(e[6]=n("b",null,"Nur Zutatenliste vorhanden!",-1))])])):d("",!0),n("div",he,[t.duration?(i(),f("span",ye,[n("b",null,I(t.duration)+" Min.",1),e[7]||(e[7]=m(" | "))])):d("",!0),n("span",null,[n("b",null,I(t.voting)+" x 👍",1)])])]),n("div",ke,[n("a",{target:"_blank",href:"/recipes/"+t.id,style:{"text-decoration-line":"none","font-weight":"700","font-size":"2.04em",color:"#ffffff !important","background-color":"rgba(93,93,93,0.66)",hyphens:"auto","overflow-wrap":"break-word"},class:"text-medium-emphasis"},I(t.title),9,be)]),n("div",null,[o(c,{onClick:k=>L(t.id),variant:"flat",color:"rgba(198, 217, 238, 0.7)"},{default:a(()=>e[8]||(e[8]=[m("Einplanen")])),_:2,__:[8]},1032,["onClick"])])])]),_:2},1032,["src"]))),128))]),_:1},8,["hide-delimiters"])):d("",!0)])]),n("div",xe,[e[17]||(e[17]=n("h2",{class:"mt-6 text-center"},"~ Geplant ~",-1)),n("div",we,[_(w)&&_(w).length>0?(i(),g(c,{key:0,variant:"plain",class:"text-center",onClick:j},{default:a(()=>e[10]||(e[10]=[m("Alle geplanten Rezepte entfernen")])),_:1,__:[10]})):d("",!0)]),o(se,{class:"text-center mt-2"},{default:a(()=>[_(w).length===0?(i(),f("div",Ie,[n("div",null,[o(v,{icon:"mdi-chef-hat",size:"50"})]),e[11]||(e[11]=n("div",{style:{"font-size":"1.2em"}},"Keine geplanten Rezepte gefunden!",-1))])):d("",!0),(i(!0),f(D,null,N(_(w),t=>(i(),g(ne,{cols:"6",md:"4",sm:"6",lg:"3",xl:"2",key:t.id},{default:a(()=>[o(te,{class:"mx-auto","max-width":"374"},{default:a(()=>[(i(),g(ee,{class:"position-relative",height:"200",src:V(t),key:x.value[t.id]?x.value[t.id]:0,color:"grey",cover:""},{default:a(()=>[n("div",Re,[t.duration?(i(),f("div",Pe,[n("b",null,I(t.duration)+" Min.",1)])):d("",!0),t.tags?(i(),f("div",ze,[n("a",{target:"_blank",href:"/recipes/go?id="+t.id,style:{"text-decoration-line":"none",color:"#ffffff","font-size":"1.1em"}},I(t.title),9,Se)])):d("",!0)]),!t.duration&&!t.tags&&!(t.sectionsInProgress||t.ingredientsInProgress||t.imageInProgress)?(i(),f("div",Ce,[n("span",null,[o(v,{icon:"mdi-information-slab-circle"}),e[12]||(e[12]=m()),e[13]||(e[13]=n("b",null,"Nur Zutatenliste vorhanden!",-1))])])):d("",!0),o(Y,{color:"transparent"},{append:a(()=>[o(X,null,{activator:a(({props:k})=>[!t.imageInProgress&&!t.sectionsInProgress&&!t.ingredientsInProgress?(i(),g(c,re({key:0,icon:"mdi-dots-vertical",color:"white"},{ref_for:!0},k),{default:a(()=>[o(v,{icon:"mdi-dots-vertical",size:"35"})]),_:2},1040)):d("",!0)]),default:a(()=>[!t.imageInProgress&&!t.sectionsInProgress?(i(),g(q,{key:0},{default:a(()=>[o(K,{onClick:k=>W(t.id)},{default:a(()=>[o(F,null,{default:a(()=>e[14]||(e[14]=[m("Zutaten einkaufen")])),_:1,__:[14]})]),_:2},1032,["onClick"]),o(K,{onClick:k=>U(t.id)},{default:a(()=>[o(F,null,{default:a(()=>e[15]||(e[15]=[m("Aus Planung entfernen")])),_:1,__:[15]})]),_:2},1032,["onClick"])]),_:2},1024)):d("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["src"])),n("div",Ve,[o(c,{variant:"outlined",to:"/recipes/go?id="+t.id},{default:a(()=>e[16]||(e[16]=[m("Rezept zubereiten")])),_:2,__:[16]},1032,["to"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),o(ae,{onResult:e[0]||(e[0]=t=>C.value=t)})])}}},Fe=de(Ae,[["__scopeId","data-v-e42cdb1b"]]),Ne={__name:"index",setup(Z){return G(async()=>{T()}),(z,u)=>(i(),g(Fe))}};export{Ne as default};
