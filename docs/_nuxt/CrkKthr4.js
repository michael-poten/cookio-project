import{I as ft,C as j,R}from"./PUEIcrrp.js";import{u as gt,R as mt}from"./MNflTq6_.js";import{_ as _t,L as E,M as pt,J as kt,N as yt,K as J,r as x,o as Q,k as $,g as c,x as g,y as s,B as a,z as l,C as o,D as d,O as v,P as u,Q as i,R as F,S as G,A as w,T as bt}from"./PBTyrjFC.js";const ht={class:"text-center"},Rt={class:"text-center"},wt={key:0,class:"text-center mt-8 text-high-emphasis",style:{width:"100%"}},xt={class:"mx-auto"},Ct={style:{"background-color":"rgba(93,93,93,0.66)"}},It={key:0,class:"px-1 pb-1"},zt={key:1,class:"pa-1 text-white",style:{"font-size":"0.8em"}},Pt={class:"text-white"},Vt={key:0,class:"px-1"},Dt={class:"ma-2"},At=["onClick"],St={style:{width:"100%"}},$t={style:{width:"100%"},class:"text-right mt-2"},Bt={key:0,class:"text-center mt-8 text-high-emphasis",style:{width:"100%"}},Mt={class:"overlay-bottom-right"},Nt={key:0,style:{"background-color":"rgba(93,93,93,0.66)"},class:"px-1"},Zt={style:{"font-size":"1.1em"},class:"px-1"},Kt=["href"],Lt={key:1,style:{"text-decoration-line":"none",color:"#ffffff","background-color":"rgba(93,93,93,0.66)"},class:"pa-1"},Tt={class:"overlay-top-left pa-1",style:{"font-size":"0.8em"}},Ut={style:{"background-color":"rgba(93,93,93,0.66)"},class:"pa-1"},Ot={key:0,style:{"background-color":"rgba(93,93,93,0.66)"},class:"pa-1"},jt={class:"ma-2"},Et={class:"ma-2"},Ft={class:"ma-2"},Gt={__name:"MealPlanner",setup(q){const D=gt(),{recipes:y}=E(D);pt(),kt(),yt();const B=J(),{authInfo:k,githubMode:C,lanAddress:H}=E(B),M=x({}),A=x(null),N=x(null),Z=x(null),K=x(null);Q(async()=>{await B.getAuthInfo(),await _()});const L=$(()=>m.value.filter(n=>!n.ordered)),b=$(()=>y.value?(y.value=y.value.sort((n,t)=>{const r=n.rating,p=t.rating,I=typeof r=="number"&&r!==null,z=typeof p=="number"&&p!==null;return!I&&!z?0:I?z?p-r:-1:1}),y.value.filter(n=>!!n.voting)):[]),m=$(()=>y.value.filter(n=>!!n.planned));function T(n){return C.value?"https://mmhhhh.de/data/home/recipes/"+n.id+"/image.jpg":H.value+"api/"+k.value.userId+"/recipes/"+n.id+"/image"}async function S(n,t=!1){if(t){const r={cooked:!0};await R.updateRecipe(k.value.userId,n.id,r),await _()}C.value?window.open("https://mmhhhh.de/recipes/go?id="+n.id,"_blank","noopener"):window.open("/recipes/go?id="+n.id,"_blank","noopener")}async function W(n){const t={planned:!0,voting:0};await R.updateRecipe(k.value.userId,n,t),await _()}async function X(){N.value().then(async n=>{if(n){let t=b.value;for(const r of t){const p={voting:0};await R.updateRecipe(k.value.userId,r.id,p)}await _()}})}async function Y(n){const t={voting:0};await R.updateRecipe(k.value.userId,n,t),await _()}async function tt(){Z.value().then(async n=>{if(n){let t=m.value;for(const r of t){const p={planned:!1,voting:0,cooked:!1,ordered:!1};await R.updateRecipe(k.value.userId,r.id,p)}await _()}})}async function et(){const n=m.value.filter(t=>!t.ordered).map(t=>t.id);n&&n.length>0&&A.value(n).then(t=>{_()})}async function U(n){const t={planned:!1,voting:0,cooked:!1,ordered:!1};await R.updateRecipe(k.value.userId,n,t),await _()}async function _(){y.value=await D.getAllRecipes(k.value.userId)}function O(n){A.value(n).then(t=>{_()})}function nt(n){K.value(n)}return(n,t)=>{const r=c("v-btn"),p=c("v-app-bar-title"),I=c("v-app-bar"),z=c("v-rating"),h=c("v-icon"),ot=c("v-carousel-item"),lt=c("v-carousel"),st=c("v-divider"),P=c("v-list-item-title"),V=c("v-list-item"),at=c("v-list"),it=c("v-menu"),rt=c("v-toolbar"),dt=c("v-img"),ut=c("v-card"),ct=c("v-col"),vt=c("v-row");return s(),g("div",null,[a(I,{color:v(C)?null:"rgb(89, 135, 184)"},{default:o(()=>[a(p,null,{default:o(()=>[a(r,{to:"/recipes","prepend-icon":"mdi-chef-hat",variant:"plain"},{default:o(()=>[...t[4]||(t[4]=[d("Cookio",-1)])]),_:1})]),_:1}),a(r,{"prepend-icon":"mdi-home-search",to:"/recipes"},{default:o(()=>[...t[5]||(t[5]=[d(" Rezeptübersicht ",-1)])]),_:1})]),_:1},8,["color"]),l("div",ht,[t[13]||(t[13]=l("h2",{class:"mt-6 text-center"},"~ Vorschläge ~",-1)),v(b)&&v(b).length>0?(s(),u(r,{key:0,variant:"plain",class:"text-center",onClick:X},{default:o(()=>[...t[6]||(t[6]=[d("Alle Likes entfernen",-1)])]),_:1})):i("",!0),l("div",Rt,[v(b).length===0?(s(),g("div",wt,[...t[7]||(t[7]=[l("div",{style:{"font-size":"1.2em"}},"Keine Vorschläge vorhanden!",-1)])])):i("",!0),v(b).length>0?(s(),u(lt,{key:1,"hide-delimiter-background":"","hide-delimiters":v(b).length===1},{default:o(()=>[(s(!0),g(F,null,G(v(b),e=>(s(),u(ot,{cover:"",src:T(e),key:e.id},{default:o(()=>[l("div",xt,[l("div",Ct,[e.rating?(s(),g("div",It,[a(z,{modelValue:e.rating,"onUpdate:modelValue":f=>e.rating=f,hover:"",length:"5",size:"20",readonly:"",color:"white"},null,8,["modelValue","onUpdate:modelValue"])])):i("",!0),!e.duration&&!e.tags&&!(e.sectionsInProgress||e.ingredientsInProgress||e.imageInProgress)?(s(),g("div",zt,[l("span",null,[a(h,{icon:"mdi-information-slab-circle"}),t[8]||(t[8]=d()),t[9]||(t[9]=l("b",null,"Nur Zutatenliste vorhanden!",-1))])])):i("",!0),l("div",Pt,[e.duration?(s(),g("span",Vt,[l("b",null,w(e.duration)+" Min.",1),t[10]||(t[10]=d(" | ",-1))])):i("",!0),l("span",null,[l("b",null,w(e.voting)+" x 👍",1)])])]),l("div",Dt,[l("span",{onClick:f=>S(e),style:{cursor:"pointer","text-decoration-line":"none","font-weight":"700","font-size":"2.04em",color:"#ffffff !important","background-color":"rgba(93,93,93,0.66)",hyphens:"auto","overflow-wrap":"break-word"},class:"text-medium-emphasis"},w(e.title),9,At)]),l("div",null,[a(r,{onClick:f=>W(e.id),variant:"flat",color:"rgba(198, 217, 238, 0.7)",height:"50"},{default:o(()=>[...t[11]||(t[11]=[d("Rezept einplanen",-1)])]),_:1},8,["onClick"])]),l("div",null,[a(r,{onClick:f=>Y(e.id),variant:"flat",color:"rgb(238 198 198 / 70%)",class:"mt-1"},{default:o(()=>[...t[12]||(t[12]=[d("Ignorieren",-1)])]),_:1},8,["onClick"])])])]),_:2},1032,["src"]))),128))]),_:1},8,["hide-delimiters"])):i("",!0)])]),a(st,{class:"mt-4"}),l("div",St,[t[28]||(t[28]=l("h2",{class:"mt-6 text-center"},"~ Geplant ~",-1)),l("div",$t,[v(m)&&v(m).length>0?(s(),u(r,{key:0,variant:"outlined",onClick:et,disabled:!v(L)||v(L).length===0},{default:o(()=>[...t[14]||(t[14]=[d("Alle Zutaten einkaufen",-1)])]),_:1},8,["disabled"])):i("",!0),v(m)&&v(m).length>0?(s(),u(r,{key:1,variant:"outlined",class:"ml-2",color:"red",onClick:tt},{default:o(()=>[...t[15]||(t[15]=[d("Alle entfernen",-1)])]),_:1})):i("",!0)]),a(vt,{class:"text-center mt-2"},{default:o(()=>[v(m).length===0?(s(),g("div",Bt,[...t[16]||(t[16]=[l("div",{style:{"font-size":"1.2em"}},"Keine geplanten Rezepte gefunden!",-1)])])):i("",!0),(s(!0),g(F,null,G(v(m),e=>(s(),u(ct,{cols:"12",sm:"12",md:"6",lg:"4",xl:"3",key:e.id},{default:o(()=>[a(ut,{class:"mx-auto","max-width":"374"},{default:o(()=>[(s(),u(dt,{class:"position-relative",height:"200",src:T(e),key:M.value[e.id]?M.value[e.id]:0,color:"grey",cover:""},{default:o(()=>[l("div",Mt,[e.duration?(s(),g("div",Nt,[l("b",null,w(e.duration)+" Min.",1)])):i("",!0),l("div",Zt,[e.duration||e.tags?(s(),g("a",{key:0,target:"_blank",href:"/recipes/go?id="+e.id,style:{"text-decoration-line":"none",color:"#ffffff","background-color":"rgba(93,93,93,0.66)"},class:"pa-1"},w(e.title),9,Kt)):i("",!0),e.duration||e.tags?i("",!0):(s(),g("span",Lt,w(e.title),1))])]),l("div",Tt,[l("div",Ut,[e.ordered?(s(),u(h,{key:0,icon:"mdi-check-bold"})):i("",!0),e.ordered?i("",!0):(s(),u(h,{key:1,icon:"mdi-close-thick",color:"red"})),t[17]||(t[17]=d()),t[18]||(t[18]=l("b",null,"Zutaten bestellt",-1))]),e.duration||e.tags?(s(),g("div",Ot,[e.cooked?(s(),u(h,{key:0,icon:"mdi-check-bold"})):i("",!0),e.cooked?i("",!0):(s(),u(h,{key:1,icon:"mdi-close-thick",color:"red"})),t[19]||(t[19]=d()),t[20]||(t[20]=l("b",null,"Rezept zubereitet",-1))])):i("",!0)]),a(rt,{color:"transparent"},{append:o(()=>[a(it,null,{activator:o(({props:f})=>[!e.imageInProgress&&!e.sectionsInProgress&&!e.ingredientsInProgress?(s(),u(r,bt({key:0,icon:"mdi-dots-vertical",color:"white"},{ref_for:!0},f),{default:o(()=>[a(h,{icon:"mdi-dots-vertical",size:"35"})]),_:1},16)):i("",!0)]),default:o(()=>[a(at,null,{default:o(()=>[a(V,{onClick:f=>O(e.id)},{default:o(()=>[a(P,null,{default:o(()=>[...t[21]||(t[21]=[d("Zutaten einkaufen",-1)])]),_:1})]),_:1},8,["onClick"]),e.duration||e.tags?(s(),u(V,{key:0,onClick:f=>S(e,!0)},{default:o(()=>[a(P,null,{default:o(()=>[...t[22]||(t[22]=[d("Rezept zubereiten",-1)])]),_:1})]),_:1},8,["onClick"])):i("",!0),v(C)?i("",!0):(s(),u(V,{key:1,onClick:f=>nt(e)},{default:o(()=>[a(P,null,{default:o(()=>[...t[23]||(t[23]=[d("Daten importieren",-1)])]),_:1})]),_:1},8,["onClick"])),a(V,{onClick:f=>U(e.id)},{default:o(()=>[a(P,null,{default:o(()=>[...t[24]||(t[24]=[d("Aus Planung entfernen",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["src"])),l("div",jt,[e.ordered?i("",!0):(s(),u(r,{key:0,variant:"outlined",onClick:f=>O(e.id)},{default:o(()=>[...t[25]||(t[25]=[d("Zutaten einkaufen",-1)])]),_:1},8,["onClick"]))]),l("div",Et,[e.ordered&&!e.cooked&&(e.duration||e.tags)?(s(),u(r,{key:0,variant:"outlined",onClick:f=>S(e,!0),color:"blue"},{default:o(()=>[...t[26]||(t[26]=[d("Rezept zubereiten",-1)])]),_:1},8,["onClick"])):i("",!0)]),l("div",Ft,[(e.duration||e.tags)&&e.cooked||!(e.duration||e.tags)&&e.ordered?(s(),u(r,{key:0,variant:"outlined",onClick:f=>U(e.id)},{default:o(()=>[...t[27]||(t[27]=[d("Aus Planung entfernen",-1)])]),_:1},8,["onClick"])):i("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),a(ft,{onResult:t[0]||(t[0]=e=>A.value=e)}),a(mt,{onResult:t[1]||(t[1]=e=>K.value=e)}),a(j,{onResult:t[2]||(t[2]=e=>N.value=e),title:"Bitte bestätigen",message:"Sollen alle vorgeschlagenen Rezepte entfernt werden?"}),a(j,{onResult:t[3]||(t[3]=e=>Z.value=e),title:"Bitte bestätigen",message:"Sollen alle geplanten Rezepte aus der Planung entfernt werden?"})])}}},Jt=_t(Gt,[["__scopeId","data-v-b9b52f60"]]),Wt={__name:"index",setup(q){return Q(async()=>{J()}),(D,y)=>(s(),u(Jt))}};export{Wt as default};
