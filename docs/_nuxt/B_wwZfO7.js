import{I as oe,R as y}from"./Bn-rIWDk.js";import{u as ie}from"./kHIQvFep.js";import{L as N,M as de,J as ce,N as re,K as H,r as b,o as L,k as T,g as c,x as m,y as a,B as o,z as n,C as s,D as r,O as u,P as i,Q as v,R as Z,S as G,A as w,T as ue}from"./gNNyPR7M.js";import{_ as fe}from"./DlAUqK2U.js";const me={class:"text-center"},ve={class:"text-center"},ge={key:0,class:"text-center mt-8 text-high-emphasis",style:{width:"100%"}},_e={class:"mx-auto"},pe={style:{"background-color":"rgba(93,93,93,0.66)"}},he={key:0,class:"px-1 pb-1"},ke={key:1,class:"pa-1 text-white",style:{"font-size":"0.8em"}},ye={class:"text-white"},be={key:0,class:"px-1"},we={class:"ma-2"},xe=["onClick"],Re={style:{width:"100%"}},ze={style:{width:"100%"},class:"text-center"},Ce={key:0,class:"text-center mt-8 text-high-emphasis",style:{width:"100%"}},Ie={class:"overlay-bottom-right"},Pe={key:0,style:{"background-color":"rgba(93,93,93,0.66)"},class:"px-1"},Se={style:{"font-size":"1.1em"},class:"px-1"},Ve=["href"],Ae={key:1,style:{"text-decoration-line":"none",color:"#ffffff","background-color":"rgba(93,93,93,0.66)"},class:"pa-1"},$e={class:"overlay-top-left pa-1",style:{"font-size":"0.8em"}},Fe={style:{"background-color":"rgba(93,93,93,0.66)"},class:"pa-1"},Ke={key:0,style:{"background-color":"rgba(93,93,93,0.66)"},class:"pa-1"},Me={class:"ma-2"},Be={class:"ma-2"},De={class:"ma-2"},Ne={__name:"MealPlanner",setup(j){const I=ie(),{recipes:_}=N(I);de(),ce(),re();const A=H(),{authInfo:g,githubMode:$,lanAddress:U}=N(A),F=b({});b(null);const K=b(null);b(!1),b([{title:"Mahlzeiten",open:!1,items:[{name:"Frühstück",selected:!1,icon:"🍳"},{name:"Vorspeise",selected:!1,icon:"🥗"},{name:"Hauptmahlzeit",selected:!1,icon:"🍽️"},{name:"Dessert",selected:!1,icon:"🍨"},{name:"Kuchen",selected:!1,icon:"🍰"},{name:"Gebäck",selected:!1,icon:"🥐"},{name:"Snack",selected:!1,icon:"🍿"},{name:"Grill",selected:!1,icon:"🔥"},{name:"Weihnachten",selected:!1,icon:"🎄"}]},{title:"Zutaten",open:!1,items:[{name:"Kartoffeln",selected:!1,icon:"🥔"},{name:"Reis",selected:!1,icon:"🍚"},{name:"Pasta",selected:!1,icon:"🍝"},{name:"Risotto",selected:!1,icon:"🍚"},{name:"Pilze",selected:!1,icon:"🍄"},{name:"Kürbis",selected:!1,icon:"🎃"},{name:"Gnocchi",selected:!1,icon:"🥔"},{name:"Spätzle",selected:!1,icon:"🍝"},{name:"Halloumi",selected:!1,icon:"🧀"},{name:"Tortellini",selected:!1,icon:"🍥"},{name:"Pesto",selected:!1,icon:"🌿"},{name:"Käse",selected:!1,icon:"🧀"}]},{title:"Zubereitungsart",open:!1,items:[{name:"Pizza",selected:!1,icon:"🍕"},{name:"Auflauf",selected:!1,icon:"🥘"},{name:"Eintopf",selected:!1,icon:"🍲"},{name:"Suppe",selected:!1,icon:"🥣"},{name:"Salat",selected:!1,icon:"🥗"},{name:"Bowl",selected:!1,icon:"🥙"},{name:"Curry",selected:!1,icon:"🍛"},{name:"Fast-Food",selected:!1,icon:"🍔"},{name:"Gourmet",selected:!1,icon:"👨‍🍳"},{name:"Wrap",selected:!1,icon:"🥙"},{name:"Sandwich",selected:!1,icon:"🥪"},{name:"Burger",selected:!1,icon:"🍔"},{name:"Thermomix",selected:!1,icon:"⚙️"},{name:"Flammkuchen",selected:!1,icon:"🍕"}]},{title:"Fleischtyp",open:!1,items:[{name:"vegetarisch",selected:!1,icon:"🥦"},{name:"vegan",selected:!1,icon:"🌱"},{name:"Tofu",selected:!1,icon:"🧈"},{name:"Soja",selected:!1,icon:"🫘"},{name:"Fisch",selected:!1,icon:"🐟"},{name:"Fleisch",selected:!1,icon:"🥩"},{name:"Hähnchenfleisch",selected:!1,icon:"🍗"},{name:"Rindfleisch",selected:!1,icon:"🥩"},{name:"Schweinefleisch",selected:!1,icon:"🍖"}]},{title:"Länderküche",open:!1,items:[{name:"italienisch",selected:!1,icon:"🇮🇹"},{name:"mediterran",selected:!1,icon:"🌿"},{name:"mexikanisch",selected:!1,icon:"🌮"},{name:"amerikanisch",selected:!1,icon:"🍟"},{name:"französisch",selected:!1,icon:"🥖"},{name:"afrikanisch",selected:!1,icon:"🪘"},{name:"arabisch",selected:!1,icon:"🧆"},{name:"deutsch",selected:!1,icon:"🥨"},{name:"griechisch",selected:!1,icon:"🥙"},{name:"asiatisch",selected:!1,icon:"🍜"},{name:"japanisch",selected:!1,icon:"🍣"},{name:"koreanisch",selected:!1,icon:"🍱"},{name:"spanisch",selected:!1,icon:"🥘"},{name:"russisch",selected:!1,icon:"🥟"},{name:"thailändisch",selected:!1,icon:"🍲"},{name:"türkisch",selected:!1,icon:"🍢"},{name:"vietnamesisch",selected:!1,icon:"🍜"},{name:"indisch",selected:!1,icon:"🍛"}]},{title:"Jahreszeiten",open:!1,items:[{name:"Winter",selected:!1,icon:"❄️"},{name:"Frühling",selected:!1,icon:"🌸"},{name:"Sommer",selected:!1,icon:"🌞"},{name:"Herbst",selected:!1,icon:"🍂"}]}]),b({duration:[0,120],rating:1,tags:[]}),L(async()=>{await A.getAuthInfo(),await p()});const h=T(()=>(console.log("recipes",_.value),_.value?(_.value=_.value.sort((l,e)=>{const d=l.rating,R=e.rating,z=typeof d=="number"&&d!==null,C=typeof R=="number"&&R!==null;return!z&&!C?0:z?C?R-d:-1:1}),_.value.filter(l=>!!l.voting)):[])),x=T(()=>_.value.filter(l=>!!l.planned));function M(l){return $.value?"https://mmhhhh.de/data/home/recipes/"+l.id+"/image.jpg":U.value+"api/"+g.value.userId+"/recipes/"+l.id+"/image"}async function P(l,e=!1){if(e){const d={cooked:!0};await y.updateRecipe(g.value.userId,l.id,d),await p()}$.value?window.open("https://mmhhhh.de/recipes/go?id="+l.id,"_blank","noopener"):window.open("/recipes/go?id="+l.id,"_blank","noopener")}async function W(l){const e={planned:!0,voting:0};await y.updateRecipe(g.value.userId,l,e),await p()}async function E(){let l=h.value;for(const e of l){const d={voting:0};await y.updateRecipe(g.value.userId,e.id,d)}await p()}async function J(l){const e={voting:0};await y.updateRecipe(g.value.userId,l,e),await p()}async function O(){let l=x.value;for(const e of l){const d={planned:!1,voting:0,cooked:!1};await y.updateRecipe(g.value.userId,e.id,d)}await p()}async function B(l){const e={planned:!1,voting:0,cooked:!1,ordered:!1};await y.updateRecipe(g.value.userId,l,e),await p()}async function p(){console.log("authInfo.value.userId",g.value.userId),_.value=await I.getAllRecipes(g.value.userId)}function D(l){K.value(l).then(e=>{p()})}return(l,e)=>{const d=c("v-btn"),R=c("v-app-bar-title"),z=c("v-app-bar"),C=c("v-rating"),k=c("v-icon"),Q=c("v-carousel-item"),q=c("v-carousel"),X=c("v-divider"),S=c("v-list-item-title"),V=c("v-list-item"),Y=c("v-list"),ee=c("v-menu"),te=c("v-toolbar"),ne=c("v-img"),se=c("v-card"),ae=c("v-col"),le=c("v-row");return a(),m("div",null,[o(z,null,{default:s(()=>[o(R,null,{default:s(()=>[o(d,{to:"/recipes","prepend-icon":"mdi-chef-hat",variant:"plain"},{default:s(()=>[...e[1]||(e[1]=[r("Cookio",-1)])]),_:1})]),_:1}),o(d,{"prepend-icon":"mdi-filter-outline",to:"/recipes"},{default:s(()=>[...e[2]||(e[2]=[r(" Rezeptübersicht ",-1)])]),_:1})]),_:1}),n("div",me,[e[10]||(e[10]=n("h2",{class:"mt-6 text-center"},"~ Vorschläge ~",-1)),v(h)&&v(h).length>0?(a(),u(d,{key:0,variant:"plain",class:"text-center",onClick:E},{default:s(()=>[...e[3]||(e[3]=[r("Alle Likes entfernen",-1)])]),_:1})):i("",!0),n("div",ve,[v(h).length===0?(a(),m("div",ge,[...e[4]||(e[4]=[n("div",{style:{"font-size":"1.2em"}},"Keine Vorschläge vorhanden!",-1)])])):i("",!0),v(h).length>0?(a(),u(q,{key:1,"hide-delimiter-background":"","hide-delimiters":v(h).length===1},{default:s(()=>[(a(!0),m(Z,null,G(v(h),t=>(a(),u(Q,{cover:"",src:M(t),key:t.id},{default:s(()=>[n("div",_e,[n("div",pe,[t.rating?(a(),m("div",he,[o(C,{modelValue:t.rating,"onUpdate:modelValue":f=>t.rating=f,hover:"",length:"5",size:"20",readonly:"",color:"white"},null,8,["modelValue","onUpdate:modelValue"])])):i("",!0),!t.duration&&!t.tags&&!(t.sectionsInProgress||t.ingredientsInProgress||t.imageInProgress)?(a(),m("div",ke,[n("span",null,[o(k,{icon:"mdi-information-slab-circle"}),e[5]||(e[5]=r()),e[6]||(e[6]=n("b",null,"Nur Zutatenliste vorhanden!",-1))])])):i("",!0),n("div",ye,[t.duration?(a(),m("span",be,[n("b",null,w(t.duration)+" Min.",1),e[7]||(e[7]=r(" | ",-1))])):i("",!0),n("span",null,[n("b",null,w(t.voting)+" x 👍",1)])])]),n("div",we,[n("span",{onClick:f=>P(t),style:{cursor:"pointer","text-decoration-line":"none","font-weight":"700","font-size":"2.04em",color:"#ffffff !important","background-color":"rgba(93,93,93,0.66)",hyphens:"auto","overflow-wrap":"break-word"},class:"text-medium-emphasis"},w(t.title),9,xe)]),n("div",null,[o(d,{onClick:f=>W(t.id),variant:"flat",color:"rgba(198, 217, 238, 0.7)",height:"50"},{default:s(()=>[...e[8]||(e[8]=[r("Rezept einplanen",-1)])]),_:1},8,["onClick"])]),n("div",null,[o(d,{onClick:f=>J(t.id),variant:"flat",color:"rgb(238 198 198 / 70%)",class:"mt-1"},{default:s(()=>[...e[9]||(e[9]=[r("Ignorieren",-1)])]),_:1},8,["onClick"])])])]),_:2},1032,["src"]))),128))]),_:1},8,["hide-delimiters"])):i("",!0)])]),o(X,{class:"mt-4"}),n("div",Re,[e[23]||(e[23]=n("h2",{class:"mt-6 text-center"},"~ Geplant ~",-1)),n("div",ze,[v(x)&&v(x).length>0?(a(),u(d,{key:0,variant:"plain",class:"text-center",onClick:O},{default:s(()=>[...e[11]||(e[11]=[r("Alle geplanten Rezepte entfernen",-1)])]),_:1})):i("",!0)]),o(le,{class:"text-center mt-2"},{default:s(()=>[v(x).length===0?(a(),m("div",Ce,[...e[12]||(e[12]=[n("div",{style:{"font-size":"1.2em"}},"Keine geplanten Rezepte gefunden!",-1)])])):i("",!0),(a(!0),m(Z,null,G(v(x),t=>(a(),u(ae,{cols:"12",sm:"12",md:"6",lg:"4",xl:"3",key:t.id},{default:s(()=>[o(se,{class:"mx-auto","max-width":"374"},{default:s(()=>[(a(),u(ne,{class:"position-relative",height:"200",src:M(t),key:F.value[t.id]?F.value[t.id]:0,color:"grey",cover:""},{default:s(()=>[n("div",Ie,[t.duration?(a(),m("div",Pe,[n("b",null,w(t.duration)+" Min.",1)])):i("",!0),n("div",Se,[t.duration||t.tags?(a(),m("a",{key:0,target:"_blank",href:"/recipes/go?id="+t.id,style:{"text-decoration-line":"none",color:"#ffffff","background-color":"rgba(93,93,93,0.66)"},class:"pa-1"},w(t.title),9,Ve)):i("",!0),t.duration||t.tags?i("",!0):(a(),m("span",Ae,w(t.title),1))])]),n("div",$e,[n("div",Fe,[t.ordered?(a(),u(k,{key:0,icon:"mdi-check-bold"})):i("",!0),t.ordered?i("",!0):(a(),u(k,{key:1,icon:"mdi-close-thick",color:"red"})),e[13]||(e[13]=r()),e[14]||(e[14]=n("b",null,"Zutaten bestellt",-1))]),t.duration||t.tags?(a(),m("div",Ke,[t.cooked?(a(),u(k,{key:0,icon:"mdi-check-bold"})):i("",!0),t.cooked?i("",!0):(a(),u(k,{key:1,icon:"mdi-close-thick",color:"red"})),e[15]||(e[15]=r()),e[16]||(e[16]=n("b",null,"Rezept zubereitet",-1))])):i("",!0)]),o(te,{color:"transparent"},{append:s(()=>[o(ee,null,{activator:s(({props:f})=>[!t.imageInProgress&&!t.sectionsInProgress&&!t.ingredientsInProgress?(a(),u(d,ue({key:0,icon:"mdi-dots-vertical",color:"white"},{ref_for:!0},f),{default:s(()=>[o(k,{icon:"mdi-dots-vertical",size:"35"})]),_:1},16)):i("",!0)]),default:s(()=>[o(Y,null,{default:s(()=>[o(V,{onClick:f=>D(t.id)},{default:s(()=>[o(S,null,{default:s(()=>[...e[17]||(e[17]=[r("Zutaten einkaufen",-1)])]),_:1})]),_:1},8,["onClick"]),t.duration||t.tags?(a(),u(V,{key:0,onClick:f=>P(t,!0)},{default:s(()=>[o(S,null,{default:s(()=>[...e[18]||(e[18]=[r("Rezept zubereiten",-1)])]),_:1})]),_:1},8,["onClick"])):i("",!0),o(V,{onClick:f=>B(t.id)},{default:s(()=>[o(S,null,{default:s(()=>[...e[19]||(e[19]=[r("Aus Planung entfernen",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["src"])),n("div",Me,[t.ordered?i("",!0):(a(),u(d,{key:0,variant:"outlined",onClick:f=>D(t.id)},{default:s(()=>[...e[20]||(e[20]=[r("Zutaten einkaufen",-1)])]),_:1},8,["onClick"]))]),n("div",Be,[t.ordered&&!t.cooked&&(t.duration||t.tags)?(a(),u(d,{key:0,variant:"outlined",onClick:f=>P(t,!0),color:"blue"},{default:s(()=>[...e[21]||(e[21]=[r("Rezept zubereiten",-1)])]),_:1},8,["onClick"])):i("",!0)]),n("div",De,[(t.duration||t.tags)&&t.cooked||!(t.duration||t.tags)&&t.ordered?(a(),u(d,{key:0,variant:"outlined",onClick:f=>B(t.id)},{default:s(()=>[...e[22]||(e[22]=[r("Aus Planung entfernen",-1)])]),_:1},8,["onClick"])):i("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),o(oe,{onResult:e[0]||(e[0]=t=>K.value=t)})])}}},Te=fe(Ne,[["__scopeId","data-v-94287454"]]),je={__name:"index",setup(j){return L(async()=>{H()}),(I,_)=>(a(),u(Te))}};export{je as default};
