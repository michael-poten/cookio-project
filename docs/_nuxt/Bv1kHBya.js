import{u as te,I as ne,R as P}from"./6ND4Prvk.js";import{L as K,M as se,J as ae,N as le,K as N,r as b,o as T,k as B,g as r,x as f,y as i,B as l,z as n,C as a,D as m,O as g,P as d,Q as u,R as D,S as M,A as I,T as ie}from"./7DXENtcA.js";import{_ as oe}from"./DlAUqK2U.js";const ce={class:"text-center"},re={class:"text-center"},de={key:0,class:"text-center mt-8 text-high-emphasis",style:{width:"100%"}},ue={class:"mx-auto"},fe={style:{"background-color":"rgba(93,93,93,0.66)"}},me={key:0,class:"px-1 pb-1"},_e={key:1,class:"pa-1 text-white",style:{"font-size":"0.8em"}},ge={class:"text-white"},ve={key:0,class:"px-1"},pe={class:"ma-2"},he=["href"],ye={style:{width:"100%"}},ke={style:{width:"100%"},class:"text-center"},be={key:0,class:"text-center mt-8 text-high-emphasis",style:{width:"100%"}},xe={class:"overlay-bottom-right"},we={key:0,style:{"background-color":"rgba(93,93,93,0.66)"},class:"px-1"},Ie={key:1,style:{"background-color":"rgba(93,93,93,0.66)"},class:"px-1"},Re=["href"],Pe={key:0,class:"overlay-top-left pa-1",style:{"font-size":"0.8em","background-color":"rgba(93,93,93,0.66)"}},ze={class:"ma-2"},Se={__name:"MealPlanner",setup(G){const z=te(),{recipes:_}=K(z);se(),ae(),le();const S=N(),{authInfo:v}=K(S),x=b({});b(null);const V=b(null);b(!1),b([{title:"Mahlzeiten",open:!1,items:[{name:"Frühstück",selected:!1,icon:"🍳"},{name:"Vorspeise",selected:!1,icon:"🥗"},{name:"Hauptmahlzeit",selected:!1,icon:"🍽️"},{name:"Dessert",selected:!1,icon:"🍨"},{name:"Kuchen",selected:!1,icon:"🍰"},{name:"Gebäck",selected:!1,icon:"🥐"},{name:"Snack",selected:!1,icon:"🍿"},{name:"Grill",selected:!1,icon:"🔥"},{name:"Weihnachten",selected:!1,icon:"🎄"}]},{title:"Zutaten",open:!1,items:[{name:"Kartoffeln",selected:!1,icon:"🥔"},{name:"Reis",selected:!1,icon:"🍚"},{name:"Pasta",selected:!1,icon:"🍝"},{name:"Risotto",selected:!1,icon:"🍚"},{name:"Pilze",selected:!1,icon:"🍄"},{name:"Kürbis",selected:!1,icon:"🎃"},{name:"Gnocchi",selected:!1,icon:"🥔"},{name:"Spätzle",selected:!1,icon:"🍝"},{name:"Halloumi",selected:!1,icon:"🧀"},{name:"Tortellini",selected:!1,icon:"🍥"},{name:"Pesto",selected:!1,icon:"🌿"},{name:"Käse",selected:!1,icon:"🧀"}]},{title:"Zubereitungsart",open:!1,items:[{name:"Pizza",selected:!1,icon:"🍕"},{name:"Auflauf",selected:!1,icon:"🥘"},{name:"Eintopf",selected:!1,icon:"🍲"},{name:"Suppe",selected:!1,icon:"🥣"},{name:"Salat",selected:!1,icon:"🥗"},{name:"Bowl",selected:!1,icon:"🥙"},{name:"Curry",selected:!1,icon:"🍛"},{name:"Fast-Food",selected:!1,icon:"🍔"},{name:"Gourmet",selected:!1,icon:"👨‍🍳"},{name:"Wrap",selected:!1,icon:"🥙"},{name:"Sandwich",selected:!1,icon:"🥪"},{name:"Burger",selected:!1,icon:"🍔"},{name:"Thermomix",selected:!1,icon:"⚙️"},{name:"Flammkuchen",selected:!1,icon:"🍕"}]},{title:"Fleischtyp",open:!1,items:[{name:"vegetarisch",selected:!1,icon:"🥦"},{name:"vegan",selected:!1,icon:"🌱"},{name:"Tofu",selected:!1,icon:"🧈"},{name:"Soja",selected:!1,icon:"🫘"},{name:"Fisch",selected:!1,icon:"🐟"},{name:"Fleisch",selected:!1,icon:"🥩"},{name:"Hähnchenfleisch",selected:!1,icon:"🍗"},{name:"Rindfleisch",selected:!1,icon:"🥩"},{name:"Schweinefleisch",selected:!1,icon:"🍖"}]},{title:"Länderküche",open:!1,items:[{name:"italienisch",selected:!1,icon:"🇮🇹"},{name:"mediterran",selected:!1,icon:"🌿"},{name:"mexikanisch",selected:!1,icon:"🌮"},{name:"amerikanisch",selected:!1,icon:"🍟"},{name:"französisch",selected:!1,icon:"🥖"},{name:"afrikanisch",selected:!1,icon:"🪘"},{name:"arabisch",selected:!1,icon:"🧆"},{name:"deutsch",selected:!1,icon:"🥨"},{name:"griechisch",selected:!1,icon:"🥙"},{name:"asiatisch",selected:!1,icon:"🍜"},{name:"japanisch",selected:!1,icon:"🍣"},{name:"koreanisch",selected:!1,icon:"🍱"},{name:"spanisch",selected:!1,icon:"🥘"},{name:"russisch",selected:!1,icon:"🥟"},{name:"thailändisch",selected:!1,icon:"🍲"},{name:"türkisch",selected:!1,icon:"🍢"},{name:"vietnamesisch",selected:!1,icon:"🍜"},{name:"indisch",selected:!1,icon:"🍛"}]},{title:"Jahreszeiten",open:!1,items:[{name:"Winter",selected:!1,icon:"❄️"},{name:"Frühling",selected:!1,icon:"🌸"},{name:"Sommer",selected:!1,icon:"🌞"},{name:"Herbst",selected:!1,icon:"🍂"}]}]),b({duration:[0,120],rating:1,tags:[]}),T(async()=>{await S.getAuthInfo(),await y(),C()});const h=B(()=>(_.value=_.value.sort((o,e)=>{const c=o.rating,s=e.rating,R=typeof c=="number"&&c!==null,p=typeof s=="number"&&s!==null;return!R&&!p?0:R?p?s-c:-1:1}),_.value.filter(o=>!!o.voting))),w=B(()=>_.value.filter(o=>!!o.planned));async function Z(o){const e={planned:!0,voting:0};await P.updateRecipe(v.value.userId,o,e),await y()}async function E(){let o=h.value;for(const e of o){const c={voting:0};await P.updateRecipe(v.value.userId,e.id,c)}await y()}async function H(){let o=w.value;for(const e of o){const c={planned:!1};await P.updateRecipe(v.value.userId,e.id,c)}await y()}async function $(o){const e={planned:!1,voting:0};await P.updateRecipe(v.value.userId,o,e),await y()}async function y(){console.log("authInfo.value.userId",v.value.userId),_.value=(await z.getAllRecipes(v.value.userId)).data}async function C(o){if(await y(),_.value){const e=_.value.filter(s=>!s.ingredientsInProgress&&!s.sectionsInProgress&&!s.imageInProgress).map(s=>s.id);o&&o.forEach(s=>{e.includes(s)&&(x.value[s]?x.value[s]++:x.value[s]=1)});const c=_.value.filter(s=>s.ingredientsInProgress||s.sectionsInProgress||s.imageInProgress).map(s=>s.id);c.length>0&&(await new Promise(s=>setTimeout(s,2e3)),await C(c))}}function L(o){V.value(o)}return(o,e)=>{const c=r("v-btn"),s=r("v-app-bar-title"),R=r("v-app-bar"),p=r("v-icon"),W=r("v-rating"),j=r("v-carousel-item"),J=r("v-carousel"),A=r("v-list-item-title"),F=r("v-list-item"),U=r("v-list"),O=r("v-menu"),Q=r("v-toolbar"),q=r("v-img"),X=r("v-card"),Y=r("v-col"),ee=r("v-row");return i(),f("div",null,[l(R,null,{default:a(()=>[l(s,null,{default:a(()=>[l(c,{to:"/recipes","prepend-icon":"mdi-chef-hat",variant:"plain"},{default:a(()=>e[1]||(e[1]=[m("Cookio")])),_:1,__:[1]})]),_:1}),l(c,{"prepend-icon":"mdi-filter-outline",to:"/recipes"},{default:a(()=>e[2]||(e[2]=[m(" Rezeptübersicht ")])),_:1,__:[2]})]),_:1}),n("div",ce,[e[9]||(e[9]=n("h2",{class:"mt-6 text-center"},"~ Vorschläge ~",-1)),u(h)&&u(h).length>0?(i(),g(c,{key:0,variant:"plain",class:"text-center",onClick:E},{default:a(()=>e[3]||(e[3]=[m("Alle Vorschläge entfernen")])),_:1,__:[3]})):d("",!0),n("div",re,[u(h).length===0?(i(),f("div",de,[n("div",null,[l(p,{icon:"mdi-chef-hat",size:"50"})]),e[4]||(e[4]=n("div",{style:{"font-size":"1.2em"}},"Keine ausgewählten Rezepte gefunden!",-1))])):d("",!0),u(h).length>0?(i(),g(J,{key:1,"hide-delimiter-background":"","hide-delimiters":u(h).length===1},{default:a(()=>[(i(!0),f(D,null,M(u(h),t=>(i(),g(j,{cover:"",src:"/api/"+u(v).userId+"/recipes/"+t.id+"/image",key:t.id},{default:a(()=>[n("div",ue,[n("div",fe,[t.rating?(i(),f("div",me,[l(W,{modelValue:t.rating,"onUpdate:modelValue":k=>t.rating=k,hover:"",length:"5",size:"20",readonly:"",color:"white"},null,8,["modelValue","onUpdate:modelValue"])])):d("",!0),!t.duration&&!t.tags&&!(t.sectionsInProgress||t.ingredientsInProgress||t.imageInProgress)?(i(),f("div",_e,[n("span",null,[l(p,{icon:"mdi-information-slab-circle"}),e[5]||(e[5]=m()),e[6]||(e[6]=n("b",null,"Nur Zutatenliste vorhanden!",-1))])])):d("",!0),n("div",ge,[t.duration?(i(),f("span",ve,[n("b",null,I(t.duration)+" Min.",1),e[7]||(e[7]=m(" | "))])):d("",!0),n("span",null,[n("b",null,I(t.voting)+" x 👍",1)])])]),n("div",pe,[n("a",{target:"_blank",href:"/recipes/"+t.id,style:{"text-decoration-line":"none","font-weight":"700","font-size":"2.04em",color:"#ffffff !important","background-color":"rgba(93,93,93,0.66)",hyphens:"auto","overflow-wrap":"break-word"},class:"text-medium-emphasis"},I(t.title),9,he)]),n("div",null,[l(c,{onClick:k=>Z(t.id),variant:"flat",color:"rgba(198, 217, 238, 0.7)"},{default:a(()=>e[8]||(e[8]=[m("Einplanen")])),_:2,__:[8]},1032,["onClick"])])])]),_:2},1032,["src"]))),128))]),_:1},8,["hide-delimiters"])):d("",!0)])]),n("div",ye,[e[17]||(e[17]=n("h2",{class:"mt-6 text-center"},"~ Geplant ~",-1)),n("div",ke,[u(w)&&u(w).length>0?(i(),g(c,{key:0,variant:"plain",class:"text-center",onClick:H},{default:a(()=>e[10]||(e[10]=[m("Alle geplanten Rezepte entfernen")])),_:1,__:[10]})):d("",!0)]),l(ee,{class:"text-center mt-2"},{default:a(()=>[u(w).length===0?(i(),f("div",be,[n("div",null,[l(p,{icon:"mdi-chef-hat",size:"50"})]),e[11]||(e[11]=n("div",{style:{"font-size":"1.2em"}},"Keine geplanten Rezepte gefunden!",-1))])):d("",!0),(i(!0),f(D,null,M(u(w),t=>(i(),g(Y,{cols:"6",md:"4",sm:"6",lg:"3",xl:"2",key:t.id},{default:a(()=>[l(X,{class:"mx-auto","max-width":"374"},{default:a(()=>[(i(),g(q,{class:"position-relative",height:"200",src:"/api/"+u(v).userId+"/recipes/"+t.id+"/image",key:x.value[t.id]?x.value[t.id]:0,color:"grey",cover:""},{default:a(()=>[n("div",xe,[t.duration?(i(),f("div",we,[n("b",null,I(t.duration)+" Min.",1)])):d("",!0),t.tags?(i(),f("div",Ie,[n("a",{target:"_blank",href:"/recipes?id="+t.id,style:{"text-decoration-line":"none",color:"#ffffff","font-size":"1.1em"}},I(t.title),9,Re)])):d("",!0)]),!t.duration&&!t.tags&&!(t.sectionsInProgress||t.ingredientsInProgress||t.imageInProgress)?(i(),f("div",Pe,[n("span",null,[l(p,{icon:"mdi-information-slab-circle"}),e[12]||(e[12]=m()),e[13]||(e[13]=n("b",null,"Nur Zutatenliste vorhanden!",-1))])])):d("",!0),l(Q,{color:"transparent"},{append:a(()=>[l(O,null,{activator:a(({props:k})=>[!t.imageInProgress&&!t.sectionsInProgress&&!t.ingredientsInProgress?(i(),g(c,ie({key:0,icon:"mdi-dots-vertical",color:"white"},{ref_for:!0},k),{default:a(()=>[l(p,{icon:"mdi-dots-vertical",size:"35"})]),_:2},1040)):d("",!0)]),default:a(()=>[!t.imageInProgress&&!t.sectionsInProgress?(i(),g(U,{key:0},{default:a(()=>[l(F,{onClick:k=>L(t.id)},{default:a(()=>[l(A,null,{default:a(()=>e[14]||(e[14]=[m("Zutaten einkaufen")])),_:1,__:[14]})]),_:2},1032,["onClick"]),l(F,{onClick:k=>$(t.id)},{default:a(()=>[l(A,null,{default:a(()=>e[15]||(e[15]=[m("Aus Planung entfernen")])),_:1,__:[15]})]),_:2},1032,["onClick"])]),_:2},1024)):d("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["src"])),n("div",ze,[l(c,{variant:"outlined",to:"/recipes?id="+t.id},{default:a(()=>e[16]||(e[16]=[m("Rezept zubereiten")])),_:2,__:[16]},1032,["to"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),l(ne,{onResult:e[0]||(e[0]=t=>V.value=t)})])}}},Ve=oe(Se,[["__scopeId","data-v-ba67ad42"]]),Ke={__name:"index",setup(G){return T(async()=>{N()}),(z,_)=>(i(),g(Ve))}};export{Ke as default};
