import{I as he,R as V}from"./BFqQx4b8.js";import{u as ke,R as ye,C as be}from"./BU1ox48_.js";import{_ as Ie,K as we,L as W,M as xe,J as Re,N as Pe,r as b,o as Z,k as ze,g as d,x as c,y as o,B as s,z as u,P as v,Q as r,C as l,D as _,O as p,A as I,R as T,S as B,T as Ce}from"./DMirjRL9.js";const Ve={class:"pa-4"},Se={key:0,class:"mt-2"},Fe={class:"mt-2"},De={key:0},$e={key:0,class:"text-center mt-8 text-high-emphasis",style:{width:"100%"}},Te={class:"overlay-top-left"},Be={key:0},Ue={key:0,class:"px-1 pb-1",style:{"background-color":"rgba(93,93,93,0.66)"}},Ge={key:1},Ke={key:0},Me={key:1},Ne={key:0,class:"overlay-bottom-right"},Ae={style:{"background-color":"rgba(93,93,93,0.66)"},class:"px-1"},Oe={class:"overlay-bottom-left pa-1"},He={key:1,style:{"background-color":"rgba(93,93,93,0.66)","font-size":"0.8em"},class:"pa-1"},Je={key:0,class:"mr-0",style:{"font-weight":"600","font-size":"1.6em"}},We={key:1,class:"mr-1",style:{"font-weight":"600","font-size":"1.1em"}},Ze={key:0,class:"ma-2"},je={style:{"font-size":"1.2em"},class:"text-medium-emphasis"},Ee={key:1,class:"ma-2"},Qe=["onClick"],qe={__name:"RecipeOverview",setup(j){const D=ke(),$=we(),{recipes:w}=W(D),{authInfo:y,githubMode:g,lanAddress:E}=W($);xe(),Re(),Pe();const h=b({}),U=b(null),G=b(null),K=b(null),S=b(!1),Q=b([{title:"Mahlzeiten",open:!1,items:[{name:"Frühstück",selected:!1,icon:"🍳"},{name:"Vorspeise",selected:!1,icon:"🥗"},{name:"Hauptmahlzeit",selected:!1,icon:"🍽️"},{name:"Dessert",selected:!1,icon:"🍨"},{name:"Kuchen",selected:!1,icon:"🍰"},{name:"Gebäck",selected:!1,icon:"🥐"},{name:"Snack",selected:!1,icon:"🍿"},{name:"Grill",selected:!1,icon:"🔥"},{name:"Weihnachten",selected:!1,icon:"🎄"}]},{title:"Zutaten",open:!1,items:[{name:"Kartoffeln",selected:!1,icon:"🥔"},{name:"Reis",selected:!1,icon:"🍚"},{name:"Pasta",selected:!1,icon:"🍝"},{name:"Risotto",selected:!1,icon:"🍚"},{name:"Pilze",selected:!1,icon:"🍄"},{name:"Kürbis",selected:!1,icon:"🎃"},{name:"Gnocchi",selected:!1,icon:"🥔"},{name:"Spätzle",selected:!1,icon:"🍝"},{name:"Halloumi",selected:!1,icon:"🧀"},{name:"Tortellini",selected:!1,icon:"🍥"},{name:"Pesto",selected:!1,icon:"🌿"},{name:"Käse",selected:!1,icon:"🧀"}]},{title:"Zubereitungsart",open:!1,items:[{name:"Pizza",selected:!1,icon:"🍕"},{name:"Auflauf",selected:!1,icon:"🥘"},{name:"Eintopf",selected:!1,icon:"🍲"},{name:"Suppe",selected:!1,icon:"🥣"},{name:"Salat",selected:!1,icon:"🥗"},{name:"Bowl",selected:!1,icon:"🥙"},{name:"Curry",selected:!1,icon:"🍛"},{name:"Fast-Food",selected:!1,icon:"🍔"},{name:"Gourmet",selected:!1,icon:"👨‍🍳"},{name:"Wrap",selected:!1,icon:"🥙"},{name:"Sandwich",selected:!1,icon:"🥪"},{name:"Burger",selected:!1,icon:"🍔"},{name:"Thermomix",selected:!1,icon:"⚙️"},{name:"Flammkuchen",selected:!1,icon:"🍕"}]},{title:"Fleischtyp",open:!1,items:[{name:"vegetarisch",selected:!1,icon:"🥦"},{name:"vegan",selected:!1,icon:"🌱"},{name:"Tofu",selected:!1,icon:"🧈"},{name:"Soja",selected:!1,icon:"🫘"},{name:"Fisch",selected:!1,icon:"🐟"},{name:"Fleisch",selected:!1,icon:"🥩"},{name:"Hähnchenfleisch",selected:!1,icon:"🍗"},{name:"Rindfleisch",selected:!1,icon:"🥩"},{name:"Schweinefleisch",selected:!1,icon:"🍖"}]},{title:"Länderküche",open:!1,items:[{name:"italienisch",selected:!1,icon:"🇮🇹"},{name:"mediterran",selected:!1,icon:"🌿"},{name:"mexikanisch",selected:!1,icon:"🌮"},{name:"amerikanisch",selected:!1,icon:"🍟"},{name:"französisch",selected:!1,icon:"🥖"},{name:"afrikanisch",selected:!1,icon:"🪘"},{name:"arabisch",selected:!1,icon:"🧆"},{name:"deutsch",selected:!1,icon:"🥨"},{name:"griechisch",selected:!1,icon:"🥙"},{name:"asiatisch",selected:!1,icon:"🍜"},{name:"japanisch",selected:!1,icon:"🍣"},{name:"koreanisch",selected:!1,icon:"🍱"},{name:"spanisch",selected:!1,icon:"🥘"},{name:"russisch",selected:!1,icon:"🥟"},{name:"thailändisch",selected:!1,icon:"🍲"},{name:"türkisch",selected:!1,icon:"🍢"},{name:"vietnamesisch",selected:!1,icon:"🍜"},{name:"indisch",selected:!1,icon:"🍛"}]},{title:"Jahreszeiten",open:!1,items:[{name:"Winter",selected:!1,icon:"❄️"},{name:"Frühling",selected:!1,icon:"🌸"},{name:"Sommer",selected:!1,icon:"🌞"},{name:"Herbst",selected:!1,icon:"🍂"}]}]),f=b({duration:[0,120],rating:1,tags:[]});Z(async()=>{await $.getAuthInfo(),await x(),F()});function q(t){return g.value?"https://mmhhhh.de/data/home/recipes/"+t.id+"/image.jpg?t="+(h.value[t.id]?h.value[t.id]:0):E.value+"api/"+y.value.userId+"/recipes/"+t.id+"/image?t="+(h.value[t.id]?h.value[t.id]:0)}const M=ze(()=>{if(!w.value)return[];let t=JSON.parse(JSON.stringify(w.value));return t=t.sort((n,m)=>{const a=n.rating,z=m.rating,k=typeof a=="number"&&a!==null,R=typeof z=="number"&&z!==null;return!k&&!R?0:k?R?z-a:1:-1}).reverse(),t=t.filter(n=>{if(!n.duration&&f.value.duration[0]>0||n.duration<f.value.duration[0]||n.duration>f.value.duration[1]||g.value&&!n.uploaded)return!1;if(f.value.rating>0){const m=f.value.rating-1;if((n.rating||0)<m)return!1}return!(f.value.tags.length>0&&(!n.tags||!f.value.tags.every(m=>n.tags.includes(m))))}),t});function N(t){g.value?window.open("https://mmhhhh.de/recipes/go?id="+t.id,"_blank","noopener"):window.open("/recipes/go?id="+t.id,"_blank","noopener")}async function X(t){const n={voting:t.voting?t.voting+1:1};await V.updateRecipe(y.value.userId,t.id,n),await x()}async function Y(t){t.uploaded=!0,await V.uploadRecipeToGithub(y.value.userId,t.id),await x()}async function L(t){const n={voting:0};await V.updateRecipe(y.value.userId,t.id,n),await x()}function ee(t){const n=f.value.tags.indexOf(t);n===-1?f.value.tags.push(t):f.value.tags.splice(n,1)}async function x(){console.log("authInfo userId",y.value.userId),w.value=await D.getAllRecipes(y.value.userId)}function A(t){U.value(t).then(async n=>{n&&(t?setTimeout(()=>{const m=[t.id];F(m)},200):F())})}async function F(t){if(await x(),w.value){const n=w.value.filter(a=>!a.ingredientsInProgress&&!a.sectionsInProgress&&!a.imageInProgress).map(a=>a.id);t&&t.forEach(a=>{n.includes(a)&&(h.value[a]?h.value[a]++:h.value[a]=1)});const m=w.value.filter(a=>a.ingredientsInProgress||a.sectionsInProgress||a.imageInProgress).map(a=>a.id);m.length>0&&(await new Promise(a=>setTimeout(a,2e3)),await F(m))}}async function O(t){K.value(t).then(async n=>{n&&(await V.deleteRecipe(y.value.userId,t),await x(),V.uploadRecipeToGithub(y.value.userId,null))})}function ne(t){G.value(t)}return(t,n)=>{const m=d("v-btn"),a=d("v-app-bar-title"),z=d("v-app-bar"),k=d("v-list-item"),R=d("v-divider"),te=d("v-range-slider"),P=d("v-icon"),H=d("v-rating"),se=d("v-expansion-panel-title"),le=d("v-chip"),oe=d("v-chip-group"),ae=d("v-expansion-panel-text"),ie=d("v-expansion-panel"),de=d("v-expansion-panels"),re=d("v-navigation-drawer"),J=d("v-progress-circular"),C=d("v-list-item-title"),ue=d("v-list"),ce=d("v-menu"),me=d("v-toolbar"),fe=d("v-img"),ve=d("v-card"),ge=d("v-col"),_e=d("v-row"),pe=d("v-fab");return o(),c("div",null,[s(z,{color:p(g)?"rgb(89, 135, 184)":null},{default:l(()=>[s(a,null,{default:l(()=>[s(m,{to:"/recipes","prepend-icon":"mdi-chef-hat",variant:"plain"},{default:l(()=>[...n[8]||(n[8]=[_("Cookio",-1)])]),_:1})]),_:1}),p(g)?r("",!0):(o(),v(m,{key:0,"prepend-icon":"mdi-filter-outline",to:"/planner"},{default:l(()=>[...n[9]||(n[9]=[_(" Mahlzeiten-Planer ",-1)])]),_:1})),s(m,{"prepend-icon":"mdi-filter-outline",onClick:n[0]||(n[0]=e=>S.value=!S.value)},{default:l(()=>[...n[10]||(n[10]=[_(" Filter ",-1)])]),_:1})]),_:1},8,["color"]),s(re,{modelValue:S.value,"onUpdate:modelValue":n[3]||(n[3]=e=>S.value=e),location:"right",width:"250"},{prepend:l(()=>[s(k,{lines:"two","prepend-icon":"mdi-text-box-search-outline",title:"Filter"})]),default:l(()=>[s(R),u("div",Ve,[u("div",null,[n[11]||(n[11]=u("h4",null,[_("Dauer "),u("span",{style:{"font-size":"0.8em"}},"(Min.)")],-1)),s(te,{modelValue:f.value.duration,"onUpdate:modelValue":n[1]||(n[1]=e=>f.value.duration=e),elevation:"3",max:"120",step:"10","thumb-label":"always",class:"mt-8 px-2","hide-details":""},null,8,["modelValue"])]),s(R,{class:"mt-3"}),p(g)?r("",!0):(o(),c("div",Se,[n[12]||(n[12]=u("h4",null,"Bewertung",-1)),s(H,{modelValue:f.value.rating,"onUpdate:modelValue":n[2]||(n[2]=e=>f.value.rating=e),hover:"",length:"6",size:"40","active-color":"primary",class:"py-3"},{item:l(e=>[s(P,{color:e.isFilled?e.index===0?"#92aac5":"#1e3f66":"grey-lighten-1",size:"large"},{default:l(()=>[_(I(e.isFilled&&e.index===0?"mdi-star-off":"mdi-star"),1)]),_:2},1032,["color"])]),_:1},8,["modelValue"])])),s(R),u("div",Fe,[(o(!0),c(T,null,B(Q.value,e=>(o(),c("div",{key:e.title},[s(de,{multiple:""},{default:l(()=>[s(ie,{elevation:"0",modelValue:e.open,"onUpdate:modelValue":i=>e.open=i,class:"pa-0 ma-0"},{default:l(()=>[s(se,{class:"pa-0",static:""},{default:l(()=>[u("div",null,[u("h4",null,[_(I(e.title)+" ",1),e.items.some(i=>f.value.tags.includes(i.name))?(o(),c("span",De,"("+I(e.items.filter(i=>f.value.tags.includes(i.name)).length)+")",1)):r("",!0)])])]),_:2},1024),s(ae,{class:"no-padding-content"},{default:l(()=>[s(oe,{"selected-class":"selected-chip",column:"",multiple:""},{default:l(()=>[(o(!0),c(T,null,B(e.items,i=>(o(),v(le,{key:i.name,text:i.icon+" "+i.name,value:i.name,variant:f.value.tags.includes(i.name)?"elevated":"tonal",onClick:Ye=>ee(i.name)},null,8,["text","value","variant","onClick"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]))),128))])])]),_:1},8,["modelValue"]),s(_e,{class:"text-center"},{default:l(()=>[p(M).length===0?(o(),c("div",$e,[u("div",null,[s(P,{icon:"mdi-chef-hat",size:"50"})]),n[13]||(n[13]=u("div",{style:{"font-size":"1.8em"}},"Keine Rezepte gefunden!",-1))])):r("",!0),(o(!0),c(T,null,B(p(M),e=>(o(),v(ge,{cols:"12",md:"4",sm:"6",lg:"3",xl:"2",key:e.id},{default:l(()=>[s(ve,{class:"mx-auto","max-width":"374"},{default:l(()=>[(o(),v(fe,{class:"position-relative",height:"200",src:q(e),key:h.value[e.id]?h.value[e.id]:0,color:"grey",cover:""},{default:l(()=>[u("div",Te,[!p(g)&&(e.rating||!e.uploaded)?(o(),c("div",Be,[e.rating?(o(),c("div",Ue,[s(H,{modelValue:e.rating,"onUpdate:modelValue":i=>e.rating=i,hover:"",length:"5",size:"20",readonly:"",class:"mb-1"},null,8,["modelValue","onUpdate:modelValue"])])):r("",!0)])):r("",!0),e.ingredientsInProgress||e.sectionsInProgress||e.imageInProgress?(o(),c("div",Ge,[e.sectionsInProgress||e.ingredientsInProgress?(o(),c("span",Ke,[u("span",null,[s(J,{indeterminate:"",color:"white"})]),n[14]||(n[14]=_()),n[15]||(n[15]=u("span",null,"Wird noch analysiert...",-1))])):r("",!0),e.imageInProgress?(o(),c("span",Me,[u("span",null,[s(J,{indeterminate:"",color:"white"})]),n[16]||(n[16]=_()),n[17]||(n[17]=u("span",null,"Bild wird generiert...",-1))])):r("",!0)])):r("",!0)]),e.duration?(o(),c("div",Ne,[u("div",Ae,[u("b",null,I(e.duration)+" Min.",1)])])):r("",!0),u("div",Oe,[!p(g)&&!e.uploaded&&!e.ingredientsInProgress&&!e.sectionsInProgress&&!e.imageInProgress?(o(),v(m,{key:0,class:"mb-1",onClick:i=>Y(e),style:{"background-color":"rgba(93,93,93,0.66)"}},{default:l(()=>[s(P,{icon:"mdi-upload-off",size:"30"})]),_:1},8,["onClick"])):r("",!0),!e.duration&&!e.tags&&!(e.sectionsInProgress||e.ingredientsInProgress||e.imageInProgress)?(o(),c("div",He,[s(P,{icon:"mdi-information-slab-circle"}),n[18]||(n[18]=_()),n[19]||(n[19]=u("b",null,"Nur Zutatenliste vorhanden!",-1))])):r("",!0)]),s(me,{color:"transparent"},{append:l(()=>[!p(g)&&!e.imageInProgress&&!e.sectionsInProgress&&!e.ingredientsInProgress?(o(),v(m,{key:0,onClick:i=>X(e),style:{"background-color":"rgba(93,93,93,0.66)"}},{default:l(()=>[e.voting&&e.voting>0?(o(),c("span",Je,I(e.voting),1)):r("",!0),e.voting&&e.voting>0?(o(),c("span",We,"x")):r("",!0),s(P,{icon:e.voting&&e.voting>0?"mdi-thumb-up":"mdi-thumb-up-outline",size:"30"},null,8,["icon"])]),_:2},1032,["onClick"])):r("",!0),!p(g)&&(e.sectionsInProgress||e.ingredientsInProgress||e.imageInProgress)?(o(),v(m,{key:1,icon:"mdi-stop-circle-outline",color:"white",onClick:i=>O(e.id),variant:"plain"},null,8,["onClick"])):r("",!0),s(ce,null,{activator:l(({props:i})=>[!e.imageInProgress&&!e.sectionsInProgress&&!e.ingredientsInProgress?(o(),v(m,Ce({key:0,icon:"mdi-dots-vertical",color:"white"},{ref_for:!0},i),{default:l(()=>[s(P,{icon:"mdi-dots-vertical",size:"35"})]),_:1},16)):r("",!0)]),default:l(()=>[!e.imageInProgress&&!e.sectionsInProgress?(o(),v(ue,{key:0},{default:l(()=>[e.duration||e.tags?(o(),v(k,{key:0,onClick:i=>N(e)},{default:l(()=>[s(C,null,{default:l(()=>[...n[20]||(n[20]=[_("Rezept zubereiten",-1)])]),_:1})]),_:1},8,["onClick"])):r("",!0),p(g)?r("",!0):(o(),v(k,{key:1,onClick:i=>A(e)},{default:l(()=>[s(C,null,{default:l(()=>[...n[21]||(n[21]=[_("Daten importieren",-1)])]),_:1})]),_:1},8,["onClick"])),s(k,{onClick:i=>ne(e.id)},{default:l(()=>[s(C,null,{default:l(()=>[...n[22]||(n[22]=[_("Zutaten einkaufen",-1)])]),_:1})]),_:1},8,["onClick"]),!p(g)&&e.voting&&e.voting>0?(o(),v(k,{key:2,onClick:i=>L(e)},{default:l(()=>[s(C,null,{default:l(()=>[...n[23]||(n[23]=[_("Likes löschen",-1)])]),_:1})]),_:1},8,["onClick"])):r("",!0),p(g)?r("",!0):(o(),v(k,{key:3,onClick:i=>O(e.id)},{default:l(()=>[s(C,null,{default:l(()=>[...n[24]||(n[24]=[_("Löschen",-1)])]),_:1})]),_:1},8,["onClick"]))]),_:2},1024)):r("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["src"])),!e.sectionsInProgress&&!e.sectionsUploaded?(o(),c("div",Ze,[u("span",je,I(e.title),1)])):r("",!0),(e.duration||e.tags)&&!e.ingredientsInProgress&&!e.sectionsInProgress?(o(),c("div",Ee,[u("a",{target:"_blank",style:{"text-decoration-line":"none",color:"#000000","font-size":"1.2em",cursor:"pointer"},class:"text-medium-emphasis",onClick:i=>N(e)},I(e.title),9,Qe)])):r("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1}),n[25]||(n[25]=u("div",{style:{height:"70px"}},null,-1)),p(g)?r("",!0):(o(),v(pe,{color:"rgb(89, 135, 184)",key:"test","prepend-icon":"mdi-cookie-plus-outline",app:!0,location:"right bottom",text:"Rezept hinzufügen",extended:"",size:"large",onClick:n[4]||(n[4]=e=>A(null))})),s(ye,{onResult:n[5]||(n[5]=e=>U.value=e)}),s(he,{onResult:n[6]||(n[6]=e=>G.value=e)}),s(be,{onResult:n[7]||(n[7]=e=>K.value=e),title:"Bitte bestätigen",message:"Soll das Rezept wirklich gelöscht werden?"})])}}},Xe=Ie(qe,[["__scopeId","data-v-5de5e374"]]),tn={__name:"index",setup(j){return Z(async()=>{}),(D,$)=>(o(),v(Xe))}};export{tn as default};
