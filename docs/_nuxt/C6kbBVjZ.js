import{K as s,ab as n,ac as h,_ as I,r as S,o as x,g,Q as k,y as j,C as p,B as d,a7 as F,z as N,D as E,a8 as V,ad as $}from"./CSQU4AtQ.js";const z={convertToBringUrl:function(e){let r=[];for(const l of e){const c=[];c.push(l.name),l.amount&&l.amount!==0&&c.push(l.amount+(l.unit?" "+l.unit:"")),r.push(c.join("__"))}const a=r.join("---"),t=btoa(unescape(encodeURIComponent(a)));let i="https://app-test.scansio.de/public/bring/import/"+encodeURIComponent(t)+"/bringImport.json";return i=encodeURIComponent(i),"https://api.getbring.com/rest/bringrecipes/deeplink?url="+i+"&source=web&baseQuantity=2&requestedQuantity=2"},analyzeWithNewEngine:async function(e,r){const a=s();try{return await h.post(a.lanAddress+"api/"+e+"/recipes/"+r+"/import/newEngine",{})}catch(t){n.catchError(t)}},analyzeDraft:async function(e,r){const a=s();try{return await h.post(a.lanAddress+"api/"+e+"/recipes/"+r+"/processDraft",{})}catch(t){n.catchError(t)}},creationWithTitleForDraft:async function(e,r){const a=s();try{return await h.post(a.lanAddress+"api/"+e+"/recipes/"+r+"/creationWithTitle",{})}catch(t){n.catchError(t)}},analyzeIngredients:async function(e,r,a){const t=s();try{const o=new FormData;return o.append("image",a),await h.post(t.lanAddress+"api/"+e+"/recipes/"+r+"/import/image/ingredients",o,{headers:{"Content-Type":"multipart/form-data"}})}catch(o){n.catchError(o)}},analyzeSections:async function(e,r,a){const t=s();try{const o=new FormData;return o.append("image",a),await h.post(t.lanAddress+"api/"+e+"/recipes/"+r+"/import/image/sections",o,{headers:{"Content-Type":"multipart/form-data"}})}catch(o){n.catchError(o)}},uploadImage:async function(e,r,a){const t=s();try{const o=new FormData;return o.append("image",a),await h.post(t.lanAddress+"api/"+e+"/recipes/"+r+"/import/image",o,{headers:{"Content-Type":"multipart/form-data"}})}catch(o){n.catchError(o)}},generateImage:async function(e,r){const a=s();try{return await n.post(a.lanAddress+"api/"+e+"/recipes/"+r+"/import/generateImage")}catch(t){n.catchError(t)}},loginPicnic:async function(e,r){const a=s();try{return await n.post(a.lanAddress+"api/"+e+"/loginPicnic",r)}catch(t){n.catchError(t)}},saveIcsUrl:async function(e,r){const a=s();try{return await n.post(a.lanAddress+"api/"+e+"/icsUrl",{url:r})}catch(t){n.catchError(t)}},fetchIcsData:async function(e,r){const a=s();try{return await n.post(a.lanAddress+"api/"+e+"/fetchIcsData",{url:r})}catch(t){n.catchError(t)}},saveCalendarPlan:async function(e,r){const a=s();try{return await n.post(a.lanAddress+"api/"+e+"/calendarPlan",r)}catch(t){n.catchError(t)}},searchPicnic:async function(e,r,a,t=!1){const o=s();try{return await n.post(o.lanAddress+"api/"+e+"/picnic/search",{query:r,ingredientDescription:a,useChatGpt:t})}catch(i){n.catchError(i)}},addProductToPicnicShoppingCart:async function(e,r){const a=s();try{return await n.post(a.lanAddress+"api/"+e+"/picnic/addProductToShoppingCart",{productId:r})}catch(t){n.catchError(t)}}},M={getRecipe:async function(e,r){const a=s();try{if(a.isNetworkAccess){let t=a.lanAddress+"api/"+e+"/recipes/"+r;return(await n.get(t)).data}else return(await n.get("https://mmhhhh.de/data/home/recipes.json")).data[r]}catch(t){n.catchError(t)}},getRecipeIngredients:async function(e,r){const a=s();try{let t;return a.isNetworkAccess?t=a.lanAddress+"api/"+e+"/recipes/"+r+"/ingredients":t="https://mmhhhh.de/data/home/recipes/"+r+"/ingredients.json",await n.get(t)}catch(t){n.catchError(t)}},getRecipeSections:async function(e,r){const a=s();try{let t;return a.isNetworkAccess?t=a.lanAddress+"api/"+e+"/recipes/"+r+"/sections":t="https://mmhhhh.de/data/home/recipes/"+r+"/sections.json",await n.get(t)}catch(t){n.catchError(t)}},updateRecipe:async function(e,r,a){const t=s();try{return await n.put(t.lanAddress+"api/"+e+"/recipes/"+r,a)}catch(o){n.catchError(o)}},planRecipe:async function(e,r){const a={voting:0,planned:!0},t=s();try{let o=await n.put(t.lanAddress+"api/"+e+"/recipes/"+r,a);this.uploadRecipeToGithub(e);let i=(await t.getAuthInfo(e)).calendarPlan;i||(i={});for(let l=0;l<14;l++){const c=new Date;c.setDate(c.getDate()+l);const f=c.getFullYear(),m=String(c.getMonth()+1).padStart(2,"0"),y=String(c.getDate()).padStart(2,"0");if(!i[`${f}-${m}-${y}`]){i[`${f}-${m}-${y}`]={recipeId:null,type:"RECIPE",cooked:!1};break}}return console.log("planRecipe calendarPlan",i),await z.saveCalendarPlan(e,i),o}catch(o){n.catchError(o)}},uploadRecipeToGithub:async function(e,r){const a=s();let t={};r&&(t.recipeId=r);try{return await n.put(a.lanAddress+"api/"+e+"/recipes/githubUpload",t)}catch(o){n.catchError(o)}},deleteRecipe:async function(e,r){const a=s();try{return await n.post(a.lanAddress+"api/"+e+"/recipes/"+r+"/delete")}catch(t){n.catchError(t)}}},B=["innerHTML"],L={__name:"ConfirmationDialog",props:{message:{type:String,default:""},title:{type:String,default:""}},emits:["result"],setup(e,{emit:r}){const a=e,t=r,o=S(!1),i=S(a.message),l=S(a.title);let c=null;x(()=>{t("result",y=>(o.value=!0,new Promise((u,_)=>{c=u})))});function f(){c&&c(!0),o.value=!1,c=null}function m(){c&&c(!1),o.value=!1,c=null}return(y,u)=>{const _=g("v-toolbar"),v=g("v-btn"),b=g("v-col"),D=g("v-row"),C=g("v-container"),R=g("v-card-text"),T=g("v-card"),P=g("v-dialog");return j(),k(P,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=U=>o.value=U),onKeydown:$(m,["esc"]),"max-width":"420"},{default:p(()=>[d(T,null,{default:p(()=>[d(_,{color:"rgb(191, 208, 217)",title:l.value},null,8,["title"]),F(d(R,null,{default:p(()=>[N("div",{style:{"margin-bottom":"30px"},innerHTML:i.value},null,8,B),d(C,{class:"sub-grid"},{default:p(()=>[d(D,null,{default:p(()=>[d(b,{cols:"6"},{default:p(()=>[d(v,{onClick:m,style:{width:"100%"}},{default:p(()=>[...u[1]||(u[1]=[E("Abbrechen",-1)])]),_:1})]),_:1}),d(b,{cols:"6"},{default:p(()=>[d(v,{color:"secondary",onClick:f,style:{width:"100%"}},{default:p(()=>[...u[2]||(u[2]=[E(" Ja ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),[[V,!!i.value]])]),_:1})]),_:1},8,["modelValue"])}}},K=I(L,[["__scopeId","data-v-6b314bdd"]]),A={},w={},Q={debounceTime(e,r,a){clearTimeout(A[e]),A[e]=setTimeout(()=>{r.apply(this)},a)},reduceExecutions(e,r,a){w[e]||(w[e]=!0,setTimeout(()=>{w[e]=!1},a),r.apply(this))}};export{K as C,Q as G,z as I,M as R};
