import{K as s,ab as n,ac as h,_ as U,r as w,o as T,g,Q as I,y as k,C as p,B as d,a7 as x,z as j,D as b,a8 as F,ad as N}from"./DPh3FDk0.js";const V={convertToBringUrl:function(a){let e=[];for(const l of a){const c=[];c.push(l.name),l.amount&&l.amount!==0&&c.push(l.amount+(l.unit?" "+l.unit:"")),e.push(c.join("__"))}const r=e.join("---"),t=btoa(unescape(encodeURIComponent(r)));let i="https://app-test.scansio.de/public/bring/import/"+encodeURIComponent(t)+"/bringImport.json";return i=encodeURIComponent(i),"https://api.getbring.com/rest/bringrecipes/deeplink?url="+i+"&source=web&baseQuantity=2&requestedQuantity=2"},analyzeWithNewEngine:async function(a,e){const r=s();try{return await h.post(r.lanAddress+"api/"+a+"/recipes/"+e+"/import/newEngine",{})}catch(t){n.catchError(t)}},analyzeDraft:async function(a,e){const r=s();try{return await h.post(r.lanAddress+"api/"+a+"/recipes/"+e+"/processDraft",{})}catch(t){n.catchError(t)}},creationWithTitleForDraft:async function(a,e){const r=s();try{return await h.post(r.lanAddress+"api/"+a+"/recipes/"+e+"/creationWithTitle",{})}catch(t){n.catchError(t)}},analyzeIngredients:async function(a,e,r){const t=s();try{const o=new FormData;return o.append("image",r),await h.post(t.lanAddress+"api/"+a+"/recipes/"+e+"/import/image/ingredients",o,{headers:{"Content-Type":"multipart/form-data"}})}catch(o){n.catchError(o)}},analyzeSections:async function(a,e,r){const t=s();try{const o=new FormData;return o.append("image",r),await h.post(t.lanAddress+"api/"+a+"/recipes/"+e+"/import/image/sections",o,{headers:{"Content-Type":"multipart/form-data"}})}catch(o){n.catchError(o)}},uploadImage:async function(a,e,r){const t=s();try{const o=new FormData;return o.append("image",r),await h.post(t.lanAddress+"api/"+a+"/recipes/"+e+"/import/image",o,{headers:{"Content-Type":"multipart/form-data"}})}catch(o){n.catchError(o)}},generateImage:async function(a,e){const r=s();try{return await n.post(r.lanAddress+"api/"+a+"/recipes/"+e+"/import/generateImage")}catch(t){n.catchError(t)}},loginPicnic:async function(a,e){const r=s();try{return await n.post(r.lanAddress+"api/"+a+"/loginPicnic",e)}catch(t){n.catchError(t)}},saveIcsUrl:async function(a,e){const r=s();try{return await n.post(r.lanAddress+"api/"+a+"/icsUrl",{url:e})}catch(t){n.catchError(t)}},fetchIcsData:async function(a,e){const r=s();try{return await n.post(r.lanAddress+"api/"+a+"/fetchIcsData",{url:e})}catch(t){n.catchError(t)}},saveCalendarPlan:async function(a,e){const r=s();try{return await n.post(r.lanAddress+"api/"+a+"/calendarPlan",e)}catch(t){n.catchError(t)}},searchPicnic:async function(a,e,r,t=!1){const o=s();try{return await n.post(o.lanAddress+"api/"+a+"/picnic/search",{query:e,ingredientDescription:r,useChatGpt:t})}catch(i){n.catchError(i)}},addProductToPicnicShoppingCart:async function(a,e){const r=s();try{return await n.post(r.lanAddress+"api/"+a+"/picnic/addProductToShoppingCart",{productId:e})}catch(t){n.catchError(t)}}},L={getRecipe:async function(a,e){const r=s();try{if(r.isNetworkAccess){let t=r.lanAddress+"api/"+a+"/recipes/"+e;return(await n.get(t)).data}else return(await n.get("https://mmhhhh.de/data/home/recipes.json")).data[e]}catch(t){n.catchError(t)}},getRecipeIngredients:async function(a,e){const r=s();try{let t;return r.isNetworkAccess?t=r.lanAddress+"api/"+a+"/recipes/"+e+"/ingredients":t="https://mmhhhh.de/data/home/recipes/"+e+"/ingredients.json",await n.get(t)}catch(t){n.catchError(t)}},getRecipeSections:async function(a,e){const r=s();try{let t;return r.isNetworkAccess?t=r.lanAddress+"api/"+a+"/recipes/"+e+"/sections":t="https://mmhhhh.de/data/home/recipes/"+e+"/sections.json",await n.get(t)}catch(t){n.catchError(t)}},updateRecipe:async function(a,e,r){const t=s();try{return await n.put(t.lanAddress+"api/"+a+"/recipes/"+e,r)}catch(o){n.catchError(o)}},planRecipe:async function(a,e){const r={voting:0,planned:!0},t=s();try{let o=await n.put(t.lanAddress+"api/"+a+"/recipes/"+e,r);this.uploadRecipeToGithub(a);let i=(await t.getAuthInfo(a)).calendarPlan;i||(i={});for(let l=0;l<14;l++){const c=new Date;c.setDate(c.getDate()+l);const f=c.getFullYear(),m=String(c.getMonth()+1).padStart(2,"0"),y=String(c.getDate()).padStart(2,"0");if(!i[`${f}-${m}-${y}`]){i[`${f}-${m}-${y}`]={recipeId:null,type:"RECIPE",cooked:!1};break}}return console.log("planRecipe calendarPlan",i),await V.saveCalendarPlan(a,i),o}catch(o){n.catchError(o)}},uploadRecipeToGithub:async function(a,e){const r=s();let t={};e&&(t.recipeId=e);try{return await n.put(r.lanAddress+"api/"+a+"/recipes/githubUpload",t)}catch(o){n.catchError(o)}},deleteRecipe:async function(a,e){const r=s();try{return await n.post(r.lanAddress+"api/"+a+"/recipes/"+e+"/delete")}catch(t){n.catchError(t)}}},$=["innerHTML"],z={__name:"ConfirmationDialog",props:{message:{type:String,default:""},title:{type:String,default:""}},emits:["result"],setup(a,{emit:e}){const r=a,t=e,o=w(!1),i=w(r.message),l=w(r.title);let c=null;T(()=>{t("result",y=>(o.value=!0,new Promise((u,_)=>{c=u})))});function f(){c&&c(!0),o.value=!1,c=null}function m(){c&&c(!1),o.value=!1,c=null}return(y,u)=>{const _=g("v-toolbar"),S=g("v-btn"),v=g("v-col"),A=g("v-row"),E=g("v-container"),D=g("v-card-text"),C=g("v-card"),R=g("v-dialog");return k(),I(R,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=P=>o.value=P),onKeydown:N(m,["esc"]),"max-width":"420"},{default:p(()=>[d(C,null,{default:p(()=>[d(_,{color:"rgb(191, 208, 217)",title:l.value},null,8,["title"]),x(d(D,null,{default:p(()=>[j("div",{style:{"margin-bottom":"30px"},innerHTML:i.value},null,8,$),d(E,{class:"sub-grid"},{default:p(()=>[d(A,null,{default:p(()=>[d(v,{cols:"6"},{default:p(()=>[d(S,{onClick:m,style:{width:"100%"}},{default:p(()=>[...u[1]||(u[1]=[b("Abbrechen",-1)])]),_:1})]),_:1}),d(v,{cols:"6"},{default:p(()=>[d(S,{color:"secondary",onClick:f,style:{width:"100%"}},{default:p(()=>[...u[2]||(u[2]=[b(" Ja ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),[[F,!!i.value]])]),_:1})]),_:1},8,["modelValue"])}}},M=U(z,[["__scopeId","data-v-6b314bdd"]]);export{M as C,V as I,L as R};
